/*!CK:4270585572!*//*1398650706,178134573*/

if (self.CavalryLogger) { CavalryLogger.start_js(["IUksq"]); }

__d("GameInviteStatusEnum",[],function(a,b,c,d,e,f){e.exports={PENDING:0,ACCEPTED:1,REJECTED:2,EXPIRED:3,CANCELED:4};});
__d("PUWApplications",[],function(a,b,c,d,e,f){e.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};});
__d("PUWSteps",[],function(a,b,c,d,e,f){e.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_CANCEL_SURVEY:"client_cancel_survey",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin"};});
__d("ChannelTransport",["copyProperties","bind","AjaxRequest","URI","JSLogger","DocRPC","ChannelConstants","UserAgent","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=k.create('channel');function q(){return (1048576*Math.random()|0).toString(36);}function r(z,aa){var ba=z.subdomain;ba=ba===null?'':(ba+'-');var ca=new j(aa).setDomain(ba+z.host+'.facebook.com').setPort(z.port).setSecure(j().isSecure());return ca;}function s(z){var aa={partition:z.partition,cb:q()};if(z.sticky_token)aa.sticky_token=z.sticky_token;var ba=r(z,'/p').setQueryData(aa);p.log('start_p',{uri:ba.toString()});var ca=new i('GET',ba);if(i.supportsCORS())ca.xhr.withCredentials=true;var da=function(ea){p.log('finish_p',{xhr:ea.toJSON?ea.toJSON():ea});};ca.timeout=z.P_TIMEOUT;ca.onError=ca.onSuccess=da;ca.send();}function t(z,aa,ba){var ca=new Image(),da=0,ea=function(ha){ca.abort();return ha?aa():ba();};ca.onload=function(){p.log('ping_ok',{duration:Date.now()-da});ea(true);};ca.onerror=function(){s(z);ea(false);};var fa=o(ca.onerror,10000);ca.abort=function(){if(fa){clearTimeout(fa);fa=null;}ca.onload=ca.onerror=null;};var ga={partition:z.partition,cb:q()};if(z.sticky_token)ga.sticky_token=z.sticky_token;da=Date.now();ca.src=r(z,'/ping').setQueryData(ga);return ca;}function u(z,aa,ba,ca){var da=new Date(),ea=-1;if(z.userActive>0){ea=(da-z.userActive)/1000|0;if(ea<0)p.warn('idle_regression',{idleTime:ea,now:da.getTime(),userActive:z.userActive});}var fa={channel:z.user_channel,seq:z.seq,partition:z.partition,clientid:z.sessionID,cb:q(),idle:ea,cap:0};if(z.sticky_token)fa.sticky_token=z.sticky_token;if(z.userActive>0&&ea<60)fa.state='active';if(z.streamingCapable){fa.mode='stream';fa.format='json';}if(z.profile)fa.profile=z.profile;if(z.webrtcSupport&&(n.chrome()>=24||n.firefox()>=22))fa.cap=m.CAPABILITY_VOIP;var ga=r(z,'/pull').setQueryData(fa),ha=new i('GET',ga);if(i.supportsCORS())ha.xhr.withCredentials=true;ha.timeout=z.streamingCapable?z.STREAMING_TIMEOUT:z.LONGPOLL_TIMEOUT;ha.onJSON=aa;ha.onSuccess=ba;ha.onError=function(){var ia=(this.status==12002&&this._time>=z.MIN_12002_TIMEOUT)||(this.status==504&&this._time>=z.MIN_504_TIMEOUT),ja=ia?ba:ca;return ja&&ja.apply(this,arguments);};ha.send();z.inStreaming=z.streamingCapable;return ha;}function v(z){this.manager=z;(this.init&&this.init());}function w(z){v.apply(this,arguments);}g(w.prototype,{logName:'CORS',enterState:function(z,aa){if(this._request){this._request.abort();this._request=null;}if(z=='init')o(h(this.manager,'exitState',{status:m.OK,stateId:aa.stateId}),3000);if(!/pull|ping/.test(z))return;var ba=this.manager;if(z=='ping'){this._request=t(aa,h(ba,'exitState',{status:m.OK,stateId:aa.stateId}),h(ba,'exitState',{status:m.ERROR,stateId:aa.stateId}));}else if(z=='pull')this._request=u(aa,h(ba,'_processTransportData',aa.stateId),h(ba,'exitState',{status:m.OK,stateId:aa.stateId}),h(ba,'exitState',{status:m.ERROR,stateId:aa.stateId}));}});function x(z){p.log('iframe_init_constructor');v.apply(this,arguments);this._iframe=document.createElement('iframe');this._iframe.style.display='none';document.body.appendChild(this._iframe);l.publish(this,'outerTransport');}g(x.prototype,{logName:'iframe',_initIframe:function(z){p.log('iframe_init_start');window.onchanneliframeready=function(){p.log('iframe_resources');return z.resources;};window.onchanneliframeloaded=function(){p.log('iframe_loaded');};if(z){this._iframeURI=r(z,z.path);if(z.bustIframe){var aa={partition:z.partition,cb:q()};this._iframeURI.setQueryData(aa);}}else this._iframeURI='about:blank';this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI);p.log('iframe_uri_set');}catch(ba){p.error('iframe_uri_set_error',ba);this.exitState({status:m.ERROR,stateId:z.stateId},ba+'');}},enterState:function(z,aa){if(z=='init'){this._initIframe(aa);}else if(/idle|ping|pull/.test(z)){if(this._iframeProxy){this._iframeProxy.enterState.apply(this._iframeProxy,arguments);}else if(z!='idle')this.exitState({status:m.ERROR,stateId:aa.stateId},'iframe not yet loaded');}else if(z=='shutdown')this._initIframe();},_processTransportData:function(){this.manager._processTransportData.apply(this.manager,arguments);},exitState:function(z){if(this.manager.state=='init'&&z.status==m.OK)this._iframeProxy=l.proxy(this._iframe.contentWindow,'innerTransport',['enterState'],(this._iframeURI+'').replace(/iframe.*/,''));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments);}});function y(){this.init=this.init.bind(this);v.apply(this,arguments);}g(y.prototype,{logName:'iframe(inner)',init:function(){l.publish(this,'innerTransport');try{var aa=l.proxy(window.parent,'outerTransport',['_processTransportData','exitState'],top.DocRPC.origin);g(this,aa);this.exitState({status:m.OK,stateId:1e+06});}catch(z){p.error('iframe_inner_init_error',z);}},enterState:function(z,aa){if(this._request){this._request.abort();this._request=null;}if(z=='ping'){this._request=t(aa,h(this,'exitState',{status:m.OK,stateId:aa.stateId}),h(this,'exitState',{status:m.ERROR,stateId:aa.stateId}));}else if(z=='pull')this._request=u(aa,h(this,'_processTransportData',aa.stateId),h(this,'exitState',{status:m.OK,stateId:aa.stateId}),h(this,'exitState',{status:m.ERROR,stateId:aa.stateId}));}});e.exports={getURI:r,Transport:v,CORSTransport:w,IframeTransport:x,IframeInnerTransport:y};});
__d("MovingStat",[],function(a,b,c,d,e,f){function g(h){h=h||60000;var i={t:new Date(),count:0,v:0},j=i,k=0,l=0;function m(){var n=new Date()-h;while(j&&j.next&&j.t<n){k-=j.v;l-=j.count;j=j.next;}}this.add=function(n){k+=n;l++;var o=new Date();if(o-i.t<1000){i.v+=n;i.count++;}else{i.next={t:o,v:n,count:1};i=i.next;m();}};this.tally=function(n){n=n||1000;m();return {sum:k,count:l,timeAverage:k*n/h};};}e.exports=g;});
__d("AvailableListConstants",["fbt"],function(a,b,c,d,e,f,g){var h={ON_AVAILABILITY_CHANGED:'buddylist/availability-changed',ON_UPDATE_ERROR:'buddylist/update-error',ON_UPDATED:'buddylist/updated',ON_CHAT_NOTIFICATION_CHANGED:'chat-notification-changed',OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:'webStatus',FB_APP_STATUS:'fbAppStatus',MESSENGER_STATUS:'messengerStatus',OTHER_STATUS:'otherStatus',ACTIVE_ON_WEB:"Web",ACTIVE_ON_MOBILE:"Mobile",LEGACY_OVERLAY_OFFLINE:-1,LEGACY_OVERLAY_ONLINE:0,LEGACY_OVERLAY_IDLE:1,STATUS_ACTIVE:'active',STATUS_IDLE:'idle',STATUS_OFFLINE:'offline',legacyStatusMap:{'0':2,'1':1,'-1':0,'2':3},reverseLegacyStatusMap:{0:-1,1:1,2:0,3:2}};a.AvailableListConstants=e.exports=h;});
__d("ChatQuietLinks",["Event","DOM","UserAgent","DataStore","Parent"],function(a,b,c,d,e,f,g,h,i,j,k){var l={},m={silenceLinks:function(q){n(q,this.removeEmptyHrefs.bind(this));},nukeLinks:function(q){n(q,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(q){o(q,function(r){return !r||r==='#';});},removeAllHrefs:function(q){o(q);}};function n(q,r){var s=!!i.chrome(),t=!!i.chrome()||i.ie()>=9||i.firefox()>=4;if(l[h.getID(q)])return;l[h.getID(q)]=true;if(!t)return;if(!s){r&&r(q);return;}g.listen(q,'mouseover',function u(v){var w=k.byTag(v.getTarget(),'a');if(w){var x=w.getAttribute('href');if(p(x)){j.set(w,'stashedHref',w.getAttribute('href'));w.removeAttribute('href');}}});g.listen(q,'mouseout',function u(v){var w=k.byTag(v.getTarget(),'a'),x=w&&j.remove(w,'stashedHref');if(p(x))w.setAttribute('href',x);});g.listen(q,'mousedown',function(u){if(!u.isDefaultRequested())return true;var v=k.byTag(u.getTarget(),'a'),w=v&&j.get(v,'stashedHref');if(p(w))v.setAttribute('href',w);});}function o(q,r){var s=h.scry(q,'a');if(r)s=s.filter(function(t){return r(t.getAttribute('href'));});s.forEach(function(t){t.removeAttribute('href');t.setAttribute('tabindex',0);});}function p(q){return q&&q!=='#';}e.exports=m;});
__d("ChatVisibility",["Arbiter","JSLogger","PresencePrivacy"],function(a,b,c,d,e,f,g,h,i){var j={isOnline:function(){return i.getVisibility()===i.ONLINE;},hasBlackbirdEnabled:function(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends();},isVisibleToMostFriends:function(){return i.getOnlinePolicy()===i.ONLINE_TO_BLACKLIST&&i.getBlacklist().length>0;},isVisibleToSomeFriends:function(){return i.getOnlinePolicy()===i.ONLINE_TO_WHITELIST&&i.getWhitelist().length>0;},goOnline:function(k){if(i.getVisibility()===i.OFFLINE){h.create('blackbird').log('chat_go_online');i.setVisibility(i.ONLINE);g.inform('chat-visibility/go-online');}k&&k();},goOffline:function(k){if(i.getVisibility()===i.ONLINE){h.create('blackbird').log('chat_go_offline');i.setVisibility(i.OFFLINE);g.inform('chat-visibility/go-offline');}k&&k();},toggleVisibility:function(){if(j.isOnline()){j.goOffline();}else j.goOnline();}};a.ChatVisibility=e.exports=j;},3);
__d("GameInviteTitle.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'GameInviteTitle',propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.DOM.div(null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param("receiver",g.DOM.span({className:"_1uli"},this.props.receiverName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}else return (g.DOM.div(null,h._("{sender} wants to play {app_name} with you, right now.",[h.param("sender",g.DOM.span({className:"_1uli"},this.props.senderName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}});e.exports=j;});
__d("GameInviteAcceptedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'GameInviteAcceptedMessage',propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.DOM.div(null,h._("{receiver} accepted your invite to play {app_name}.",[h.param("receiver",g.DOM.span({className:"_1uli"},this.props.receiverName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}else return (g.DOM.div(null,h._("You accepted an invite from {sender} to play {app_name}.",[h.param("sender",g.DOM.span({className:"_1uli"},this.props.senderName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}});e.exports=j;});
__d("GameInviteRejectedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'GameInviteRejectedMessage',propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.DOM.div(null,h._("{receiver} declined your invite to play {app_name}.",[h.param("receiver",g.DOM.span({className:"_1uli"},this.props.receiverName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}else return (g.DOM.div(null,h._("You declined an invite from {sender} to play {app_name}.",[h.param("sender",g.DOM.span({className:"_1uli"},this.props.senderName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}});e.exports=j;});
__d("GameInviteExpiredMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'GameInviteExpiredMessage',propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.DOM.div(null,h._("{receiver} missed your invite to play {app_name}.",[h.param("receiver",g.DOM.span({className:"_1uli"},this.props.receiverName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}else return (g.DOM.div(null,h._("You missed a game invite from {sender} to play {app_name}.",[h.param("sender",g.DOM.span({className:"_1uli"},this.props.senderName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}});e.exports=j;});
__d("GameInviteCanceledMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'GameInviteCanceledMessage',propTypes:{appName:g.PropTypes.string.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired,senderName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.DOM.div(null,h._("You canceled an invite to {receiver} to play {app_name}.",[h.param("receiver",g.DOM.span({className:"_1uli"},this.props.receiverName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}else return (g.DOM.div(null,h._("{sender} canceled an invitation to play {app_name}.",[h.param("sender",g.DOM.span({className:"_1uli"},this.props.senderName)),h.param("app_name",g.DOM.span({className:"_1ulj"},h._("{app}",[h.param("app",this.props.appName)])))])));}});e.exports=j;});
__d("GameInviteTimer.react",["React","fbt"],function(a,b,c,d,e,f,g,h){function i(k){if(k){k=Math.ceil(k);var l=k%60;if(l<10)l='0'+l;var m=Math.floor(k/60);return m+':'+l;}else return "0:00";}var j=g.createClass({displayName:'GameInviteTimer',propTypes:{timeRemaining:g.PropTypes.number.isRequired,isSender:g.PropTypes.bool.isRequired,receiverName:g.PropTypes.string.isRequired},render:function(){if(this.props.isSender){return (g.DOM.div(null,h._("({time_remaining} remaining)",[h.param("time_remaining",i(this.props.timeRemaining))])));}else return (g.DOM.div(null,h._("You have {time_remaining} to accept.",[h.param("time_remaining",i(this.props.timeRemaining))])));}});e.exports=j;});
__d("XGameInviteSubmitControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/chat\/game_invite\/submit\/",{invite_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});});
__d("GameInvite.react",["Arbiter","AsyncRequest","ChannelConstants","React","GameInviteStatusEnum","GameInviteTitle.react","GameInviteAcceptedMessage.react","GameInviteRejectedMessage.react","GameInviteExpiredMessage.react","GameInviteCanceledMessage.react","GameInviteTimer.react","XUIButton.react","XGameInviteSubmitControllerURIBuilder","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=j.createClass({displayName:'GameInvite',propTypes:{app:j.PropTypes.object.isRequired,creationTime:j.PropTypes.number.isRequired,inviteId:j.PropTypes.string.isRequired,receiver:j.PropTypes.object.isRequired,sender:j.PropTypes.object.isRequired,status:j.PropTypes.oneOf(v(k)).isRequired,timeout:j.PropTypes.number.isRequired,viewerId:j.PropTypes.number.isRequired,onStatusUpdate:j.PropTypes.func},componentWillMount:function(){if(this.props.status===k.PENDING){var x=g.subscribe(i.getArbiterType('gameInvite/status'),function(fa,ga){ga=ga.obj;if(ga.invite_id!==this.props.inviteId)return;this.setState({status:ga.status});}.bind(this));this.setState({statusEvent:x});}var y=this.props.timeout?(this.props.timeout*1000):0,z=this.props.creationTime?(this.props.creationTime*1000):0,aa=Date.now(),ba=((z+y)-aa)/1000,ca=(ba<=0&&y>0)||y===0,da=null;if(!ca&&this.props.status===k.PENDING){var ea=function(){this.setState({time_remaining:(this.state.time_remaining-1)});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var fa={counter:null,time_remaining:0};if(this.state.status===k.PENDING)fa.status=k.EXPIRED;this.setState(fa);}};da=setInterval(ea.bind(this),1000);}this.setState({time_remaining:ba,counter:da});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);g.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(x,y){if(this.props.status!=k.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,y.status);},render:function(){var x;switch(this.state.status){case k.PENDING:var y;if(!this.state.viewerIsSender){y=[r({use:"confirm",onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:"Accept"}),r({use:"default",onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:"Decline"})];}else y=r({use:"default",onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:"Cancel"});x=(j.DOM.div(null,j.DOM.div({className:"_3gwb"},l({appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),j.DOM.div({className:"_3gwc"},q({isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),j.DOM.div({className:"_3gwa"},y)));break;case k.ACCEPTED:x=j.DOM.div({className:"_3gwd mvs"},m({appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.REJECTED:x=j.DOM.div({className:"_3gwd mvs"},n({appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.EXPIRED:x=j.DOM.div({className:"_3gwd mvs"},o({appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.CANCELED:x=j.DOM.div({className:"_3gwd mvs"},p({appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The invite status `%s` is unknown.',this.state.status);}return (j.DOM.div({className:"_3gwe"},x));},_handleAccept:function(){this._handleStatusUpdate(k.ACCEPTED);var x=window.open(this.props.app.uri);if(x)x.focus();},_handleReject:function(){this._handleStatusUpdate(k.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(k.CANCELED);},_handleStatusUpdate:function(x){this.setState({status:x,buttonsDisabled:true});var y=new s().setInt('invite_id',this.props.inviteId).setInt('sender',this.props.sender.id).setInt('action',x).getURI();new h().setURI(y).setHandler(function(z){this.setState({status:x});}.bind(this)).setErrorHandler(function(z){this.setState({buttonsDisabled:false});}.bind(this)).send();}});e.exports=w;});
__d("getDOMImageSize",["URI"],function(a,b,c,d,e,f,g){function h(m){m.onload=null;m.onerror=null;m.onreadystatechange=null;m._callback=null;m._thisObj=null;m._srcStr=null;m.parentNode&&m.parentNode.removeChild(m);}function i(){var m=this;if(m._callback)m._callback.call(m._thisObj,m.naturalWidth||m.width,m.naturalHeight||m.height,m._srcStr);h(m);}function j(){var m=this;if(m.readyState==='complete')i.call(m);}function k(){var m=this;if(m._callback)m._callback.call(m._thisObj,0,0,m._srcStr);h(m);}function l(m,n,o){o=o||null;if(!m){n.call(o,0,0,'');return;}var p=document.body;if(!p){setTimeout(l.bind(this,m,n,o),500);return;}var q;if(typeof m==='string'){q=m;}else if(typeof m==='object')if(typeof m.width==='number'&&typeof m.height==='number'){if(typeof m.src==='string'){q=m.src;if(m.naturalWidth&&m.naturalHeight){n.call(o,m.naturalWidth,m.naturalHeight,q);return;}}if(typeof m.uri==='string'){q=m.uri;if(m.width&&m.height){n.call(o,m.width,m.height,q);return;}}}else if(m instanceof g)q=m.toString();if(!q){n(0,0,m);return;}var r=document.createElement('img');r.onreadystatechange=j;r.onload=i;r.onerror=k;r._callback=n;r._thisObj=o;r._srcStr=q;r.src=q;r.style.cssText='position:absolute;left:0;top:0;width:auto;height:auto;clip:rect(0 0 0 0);';p.insertBefore(r,p.firstChild);}e.exports=l;});
__d("CachedDOMImageSizePool",["debounce","getDOMImageSize"],function(a,b,c,d,e,f,g,h){function i(j,k){"use strict";this.$CachedDOMImageSizePool0={};this.$CachedDOMImageSizePool1=k;this.$CachedDOMImageSizePool2=0;this.$CachedDOMImageSizePool3=j;this.$CachedDOMImageSizePool4=g(this.$CachedDOMImageSizePool5,5000,this);this.$CachedDOMImageSizePool6={};this.$CachedDOMImageSizePool7={};}i.prototype.get=function(j,k,l){"use strict";if(!j){k.call(l,0,0,j);return;}var m=this.$CachedDOMImageSizePool0[j];if(m){m.lastAccessTime=Date.now();k.call(l,m.width,m.height,m.src);}else if(this.$CachedDOMImageSizePool6[j]){this.$CachedDOMImageSizePool6[j].push(k);this.$CachedDOMImageSizePool7[j].push(l);}else{this.$CachedDOMImageSizePool6[j]=[k];this.$CachedDOMImageSizePool7[j]=[l];h(j,this.$CachedDOMImageSizePool8,this);}};i.prototype.set=function(j,k,l){"use strict";if(this.$CachedDOMImageSizePool2>this.$CachedDOMImageSizePool3)this.$CachedDOMImageSizePool4();var m=this.$CachedDOMImageSizePool0;if(j&&!m[j]){var n={width:k,height:l,src:j,lastAccessTime:Date.now()};m[j]=n;this.$CachedDOMImageSizePool2++;}};i.prototype.$CachedDOMImageSizePool8=function(j,k,l){"use strict";this.set(l,j,k);var m=this.$CachedDOMImageSizePool6[l],n=this.$CachedDOMImageSizePool7[l];for(var o=0,p=m.length;o<p;o++)m[o].call(n[o],j,k,l);delete this.$CachedDOMImageSizePool6[l];delete this.$CachedDOMImageSizePool7[l];};i.prototype.$CachedDOMImageSizePool5=function(){"use strict";var j=Date.now(),k=this.$CachedDOMImageSizePool0,l=this.$CachedDOMImageSizePool2,m=this.$CachedDOMImageSizePool1;for(var n in k){var o=k[n];if((j-o.lastAccessTime)>m){delete k[n];l--;}}this.$CachedDOMImageSizePool2=l;};e.exports=i;});
__d("BackgroundImage.react",["CachedDOMImageSizePool","React","ReactPropTypes","XUISpinner.react","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n='(-?(\\d+\\.)?\\d+(px|\\%))',o=new RegExp('^'+n+'?(\\s'+n+')?$','g'),p=new g(50,10*60*1000),q=h.createClass({displayName:'BackgroundImage',propTypes:{src:i.string,width:i.number.isRequired,height:i.number.isRequired,backgroundSize:i.oneOf(['contain','cover','containinside','coverinside']),loadingIndicatorStyle:i.oneOf(['none','large','small']),backgroundPosition:function(r,s,t){var u=r[s];if(u){l(typeof u==='string');l(u.match(o));}},onImageLoad:i.func,optimizeResizeSpeed:i.bool,onContextMenu:i.func},getInitialState:function(){return {imageWidth:null,imageHeight:null,imageSrc:this.props.src,loading:true};},getDefaultProps:function(){return {optimizeResizeSpeed:false,loadingIndicatorStyle:'none'};},componentDidMount:function(){this._resolveImageSize();},componentDidUpdate:function(r){if(this.props.src!==this.state.imageSrc)this.setState({imageWidth:0,imageHeight:0,imageSrc:this.props.src,loading:true},this._resolveImageSize);},_resolveImageSize:function(){var r=this.state.imageSrc;if(r)p.get(r,this._onImageSizeResolved,this);},render:function(){var r={width:this.props.width+'px',height:this.props.height+'px'},s=m(this.props.className,"_5f0d");return this.transferPropsTo(h.DOM.div({className:s,style:r,onContextMenu:this.props.onContextMenu},this._renderImage(),this._renderContent(),this._renderLoadingIndicator()));},_renderLoadingIndicator:function(){if(!this.state.loading||this.props.loadingIndicatorStyle==='none')return null;return (h.DOM.div({className:"_5laq _5lar"},h.DOM.div({className:"_5las"},h.DOM.div({className:"_5lat"},j({size:this.props.loadingIndicatorStyle})))));},_renderContent:function(){if(this.props.children)return (h.DOM.div({className:"_5laq"},h.DOM.div({className:"_5las"},h.DOM.div({className:"_5lat"},this.props.children))));},_renderImage:function(){if(!this.state.imageWidth||!this.state.imageHeight)return;var r=this.props.width,s=this.props.height,t,u;switch(this.props.backgroundSize){case 'cover':t='cover';u=false;break;case 'coverinside':t='cover';u=true;break;case 'contain':t='contain';u=false;break;case 'containinside':t='contain';u=true;}var v=this.state.imageWidth,w=this.state.imageHeight,x=r/s,y=v/w;if(t==='contain')if((v>r||!u)&&y>=x){v=r;w=v/y;}else if(w>s||!u){w=s;v=w*y;}if(t==='cover')if((v>r||!u)&&y>=x){w=s;v=w*y;}else if(w>s||!u){v=r;w=v/y;}var z=this._getImageStyle(v,w);return (h.DOM.img({alt:"",className:(("_5i4g")+(this.props.optimizeResizeSpeed?' '+"_5sjv":'')),style:z,src:this.state.imageSrc}));},_getImageStyle:function(r,s){var t;if(this.props.backgroundPosition){t=this.props.backgroundPosition.split(' ');}else t=['50%','50%'];return {width:Math.round(r)+'px',height:Math.round(s)+'px',left:this._getBackgroundPositionPxValue('left',t[0],r,s),top:this._getBackgroundPositionPxValue('top',t[1]||t[0],r,s)};},_getBackgroundPositionPxValue:function(r,s,t,u){var v=parseFloat(s),w=s.substr(v.toString().length);if(w==='px')return s;if(r==='left'){return Math.round((this.props.width-t)*(v/100))+'px';}else return Math.round((this.props.height-u)*(v/100))+'px';},_onImageSizeResolved:function(r,s,t){if(!this.isMounted()||this.state.imageSrc!==t)return;var u=this.props.onImageLoad?this.props.onImageLoad.bind(null,r,s):null;this.setState({imageWidth:r,imageHeight:s,loading:false},u);}});e.exports=q;});
__d("ReactLayer",["React","ReactEventEmitter","emptyFunction","getObjectValues","invariant","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m={componentDidMount:function(){this._layerContainer=document.createElement('div');this._renderContentIntoContainer();this.layer=this.createLayer(this._layerContainer);k(this.layer);this.layerSubscriptions=[];this.layerSubscribe(['show','hide'],function(o){this.props.onToggle&&this.props.onToggle(o==='show');}.bind(this));this.layerSubscribe('blur',function(o){this.props.onBlur&&this.props.onBlur();}.bind(this));},componentDidUpdate:function(){this._renderContentIntoContainer();this.receiveProps(this.props);},componentWillUnmount:function(){g.unmountComponentAtNode(this._layerContainer);this.layer.destroy();this.layer=null;this._layerContainer=null;while(this.layerSubscriptions.length)this.layerSubscriptions.pop().unsubscribe();},_renderContentIntoContainer:function(){g.renderComponent(g.DOM.div(null,this.props.children),this._layerContainer);},render:function(){return null;},enumerateBehaviors:function(o){o=this.getEffectiveBehaviors(o);return j(o).filter(i.thatReturnsArgument);},updateBehaviors:function(o){var p=this.getEffectiveBehaviors(this.props.behaviors),q=this.getEffectiveBehaviors(o),r;for(r in p)if(!q[r])this.layer.disableBehavior(p[r]);for(r in q){var s=p[r],t=q[r];if(s&&t){k(s===t);continue;}s&&this.layer.disableBehavior(s);t&&this.layer.enableBehavior(t);}},getEffectiveBehaviors:function(o){if(!this.getDefaultEnabledBehaviors)return o||{};return l(this.getDefaultEnabledBehaviors(),o);},layerSubscribe:function(o,p){this.layerSubscriptions.push(this.layer.subscribe(o,function(q,r){h.isEnabled()&&p(q,r);}));},getNodeForOwnerRef:function(o){var p=this.getSiblingByRef(o);return p&&p.getDOMNode();}},n={createClass:function(o){return g.createClass({mixins:[m,o]});}};e.exports=n;});
__d("ContextualLayer.react",["ContextualLayer","React","ReactLayer","Style"],function(a,b,c,d,e,f,g,h,i,j){var k=h.PropTypes,l=i.createClass({propTypes:{contextRef:k.string,context:function(m,n,o){if((m.context==null)==(m.contextRef==null))return new Error(("Exactly one of `context` or `contextRef` must be set on `")+(o+"`."));var p=m[n];if(p!=null){if(typeof p!=='object')return new Error(("Invalid `"+n+"` supplied to `"+o+"`, ")+("expected a React component."));if(h.isValidComponent(p))return new Error(("Invalid `"+n+"` supplied to `"+o+"`, ")+("expected a React component instance. You're passing a React ")+("descriptor."));}}},immutableProps:{modal:null},createLayer:function(m){var n=this._getContextNode(),o={context:n,contextBounds:this.props.contextBounds,position:this.props.position,alignment:this.props.alignment,offsetX:this.props.offsetX,offsetY:this.props.offsetY,addedBehaviors:this.enumerateBehaviors(this.props.behaviors),shouldSetARIAProperties:this.props.shouldSetARIAProperties},p=new g(o,m);this._node=m;this._matchContextSize(this.props);p.conditionShow(this.props.shown);return p;},receiveProps:function(m){this.updateBehaviors(m.behaviors);var n=this._getContextNode();if(m.contextBounds){this.layer.setContextWithBounds(n,m.contextBounds);}else this.layer.setContext(n);this._matchContextSize(m);this.layer.setPosition(m.position);this.layer.setAlignment(m.alignment);this.layer.setOffsetX(m.offsetX);this.layer.setOffsetY(m.offsetY);this.layer.conditionShow(m.shown);},_getContextNode:function(){var m;if(this.props.context){m=this.props.context.getDOMNode();}else if(this.props.contextRef)m=this.getNodeForOwnerRef(this.props.contextRef);return m;},_matchContextSize:function(m){var n=this._node,o=this._getContextNode();if(m.containerWidthMatchContext)j.set(n,'width',o.offsetWidth+'px');if(m.containerHeightMatchContext)j.set(n,'height',o.offsetHeight+'px');}});e.exports=l;});
__d("AbstractTextFieldMixin.react",["React","Keys","cx","invariant","joinClasses","mergeInto"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={propTypes:{value:g.PropTypes.string,placeholder:g.PropTypes.string,tabIndex:g.PropTypes.string,maxLength:g.PropTypes.number,onBackspace:g.PropTypes.func,onBackTab:g.PropTypes.func,onBlur:g.PropTypes.func,onChange:g.PropTypes.func,onDownArrow:g.PropTypes.func,onEnter:g.PropTypes.func,onFocus:g.PropTypes.func,onKeyDown:g.PropTypes.func,onLeftArrow:g.PropTypes.func,onNoShiftEnter:g.PropTypes.func,onRightArrow:g.PropTypes.func,onShiftEnter:g.PropTypes.func,onShiftDownArrow:g.PropTypes.func,onShiftUpArrow:g.PropTypes.func,onTab:g.PropTypes.func,onUpArrow:g.PropTypes.func,type:g.PropTypes.string},getInitialState:function(){return {focused:false,value:this.props.defaultValue||''};},getValue:function(){return this.props.value!=null?''+this.props.value:this.state.value;},onInputKeyDown:function(n){var o=this.props,p=n.keyCode,q=n.shiftKey;if(p===h.BACKSPACE&&!q&&o.onBackspace){o.onBackspace(n);}else if(p===h.TAB&&!q&&o.onTab){o.onTab(n);}else if(p===h.TAB&&q&&o.onBackTab){o.onBackTab(n);}else if(p===h.UP){if(q){if(o.onShiftUpArrow)o.onShiftUpArrowAttempt(n);}else if(o.onUpArrow)o.onUpArrow(n);}else if(p===h.DOWN&&o.onDownArrow){if(q){if(o.onShiftDownArrow)o.onShiftDownArrow(n);}else if(o.onDownArrow)o.onDownArrow(n);}else if(p===h.LEFT&&o.onLeftArrow){o.onLeftArrow(n);}else if(p===h.RIGHT&&o.onRightArrow){o.onRightArrow(n);}else if(p===h.RETURN){if(o.onEnter)o.onEnter(n);if(q){if(o.onShiftEnter)o.onShiftEnter(n);}else if(o.onNoShiftEnter)o.onNoShiftEnter(n);}if(o.onKeyDown)o.onKeyDown(n);},onInputChange:function(n){if(this.props.onChange)this.props.onChange(n);this.setState({value:n.target.value});},focusInput:function(){this.getTextFieldDOM().focus();},blurInput:function(){this.getTextFieldDOM().blur();},onInputBlur:function(event){if(this.props.onBlur)this.props.onBlur(event);if(!event.isDefaultPrevented())this.setState({focused:false});},onInputFocus:function(event){if(this.props.onFocus)this.props.onFocus(event);if(!event.isDefaultPrevented())this.setState({focused:true});},getTextFieldDOM:function(){return this.refs[this.getTextFieldRef()].getDOMNode();},getTextFieldRef:function(){return 'textField';},setTextFieldPropsOn:function(n){l(n.props,{'aria-activedescendant':this.props['aria-activedescendant'],'aria-autocomplete':this.props['aria-autocomplete'],'data-testid':this.props['data-testid'],ref:this.getTextFieldRef(),onKeyDown:this.onInputKeyDown,onBlur:this.onInputBlur,onFocus:this.onInputFocus,onChange:this.onInputChange,disabled:this.props.disabled,defaultValue:this.props.defaultValue,name:this.props.name,value:this.getValue(),id:this.props.id,maxLength:this.props.maxLength,min:this.props.min,max:this.props.max,type:this.props.type||n.props.type});return n;},render:function(){var n=null;if(!this.getValue()){var o=(("_58ai")+(this.state.focused?' '+"_58aj":''));n=g.DOM.span({className:o},this.props.placeholder);}var p=k(this.props.className,"_58ak");j(this.renderTextField);return (g.DOM.label({className:p},{placeholder:n,textField:this.renderTextField()}));}};e.exports=m;});
__d("AbstractTextInput.react",["AbstractTextFieldMixin.react","React","ReactDOMInput","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:'AbstractTextInput',mixins:[g],renderTextField:function(){return this.setTextFieldPropsOn(i({type:"text",className:"_58al",tabIndex:this.props.tabIndex,onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onPaste:this.props.onPaste}));}});e.exports=k;});
__d("SearchableTextInput.react",["EventListener","React","AbstractTextFieldMixin.react","AbstractTextInput.react","getActiveElement","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=h.createClass({displayName:'SearchableTextInput',propTypes:l(i.propTypes,{queryString:h.PropTypes.string,searchSource:h.PropTypes.object,searchSourceOptions:h.PropTypes.object,onEntriesFound:h.PropTypes.func.isRequired,searchOnFocus:h.PropTypes.bool,searchOnUpdate:h.PropTypes.bool,onPaste:h.PropTypes.func,onFocus:h.PropTypes.func,onChange:h.PropTypes.func}),componentDidMount:function(){if(this.props.onPaste)this._listener=g.listen(this.refs.input.getTextFieldDOM(),'paste',this.props.onPaste);},componentDidUpdate:function(n){if(this.props.searchOnUpdate)if(n.queryString!==this.props.queryString)this.search(this.props.queryString);},componentWillUnmount:function(){if(this._listener){this._listener.remove();this._listener=null;}},_onInputFocus:function(){this.props.searchSource.bootstrap();this.props.onFocus&&this.props.onFocus();if(this.props.searchOnFocus)this.search(this.props.queryString);},_onSearchCallback:function(n,o){if(this.props.queryString===o)this.props.onEntriesFound(n);},_onChange:function(event){this.props.onChange&&this.props.onChange(event);var n=event.target.value;setTimeout(function(){this.search(n);}.bind(this));},search:function(n){this.props.searchSource.search(n,this._onSearchCallback,this.props.searchSourceOptions);},focusInput:function(){var n=this.getTextFieldDOM();if(k()===n){this._onInputFocus();}else n.offsetHeight&&n.focus();},blurInput:function(){var n=this.getTextFieldDOM();n.offsetHeight&&n.blur();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();},render:function(){return this.transferPropsTo(j({ref:"input",value:this.props.queryString||'',onFocus:this._onInputFocus,onChange:this._onChange}));}});e.exports=m;});
__d("TypeaheadNavigation",[],function(a,b,c,d,e,f){var g={moveUp:function(h,i,j){var k=h.indexOf(i),l=k==-1?h.length-1:k-1;j(l==-1?null:h[l]);},moveDown:function(h,i,j){var k=h.indexOf(i)+1;j(k==h.length?null:h[k]);}};e.exports=g;});
__d("TypeaheadView.react",["React","cx","merge"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'TypeaheadView',propTypes:{entries:g.PropTypes.array.isRequired,extraRendererProps:g.PropTypes.object,highlightedEntry:g.PropTypes.object,isVisible:g.PropTypes.bool,queryString:g.PropTypes.string,Renderer:g.PropTypes.func.isRequired,selectedEntry:g.PropTypes.object},_onSelect:function(k){if(this.props.onSelect)this.props.onSelect(k);},_onHighlight:function(k){this.props.onHighlight(k);},render:function(){var k=((!this.props.isVisible?"hidden_elem":'')),l=i({highlightedEntry:this.props.highlightedEntry,selectedEntry:this.props.selectedEntry,entries:this.props.entries,onSelect:this._onSelect,onHighlight:this._onHighlight,onRenderHighlight:this.props.onRenderHighlight,queryString:this.props.queryString},this.props.extraRendererProps);return (g.DOM.div({className:k},this.props.Renderer(l)));}});e.exports=j;});
__d("Typeahead.react",["AbstractTextFieldMixin.react","ContextualLayer.react","InputSelection","React","ReactLayeredComponentMixin","SearchableTextInput.react","TypeaheadNavigation","TypeaheadView.react","cx","getOrCreateDOMID","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=10,s=j.createClass({displayName:'Typeahead',mixins:[k],propTypes:q(g.propTypes,{inputClassName:j.PropTypes.string,placeholder:j.PropTypes.string,queryString:j.PropTypes.string,searchSource:j.PropTypes.object.isRequired,searchSourceOptions:j.PropTypes.object,excludedEntries:j.PropTypes.object,presenter:j.PropTypes.object.isRequired,onSelectAttempt:j.PropTypes.func,autoHighlight:j.PropTypes.bool,showEntriesOnFocus:j.PropTypes.bool,selectOnBlur:j.PropTypes.bool,focusedOnInit:j.PropTypes.bool,hideViewWithEntries:j.PropTypes.bool,disabled:j.PropTypes.bool,entriesWidthMatchContext:j.PropTypes.bool,selectedEntry:j.PropTypes.object,onTypeaheadVisibilityChanged:j.PropTypes.func,onPaste:j.PropTypes.func}),getDefaultProps:function(){return {selectOnBlur:false,hideViewWithEntries:true,entriesWidthMatchContext:true};},getInitialState:function(){return {highlightedEntry:null,isAutoHighlight:this.props.autoHighlight,activeDescendant:null,activeEntries:[],focused:!!this.props.focusedOnInit,viewIsVisible:!!this.props.focusedOnInit};},_onRenderHighlight:function(t){var u=p(t);this.setState({activeDescendant:u});},_onEntriesFound:function(t){if(this.props.excludedEntries){var u=this.props.excludedEntries;t=t.filter(function(ba){return !u.hasOwnProperty(ba.getUniqueID());});}var v=this.props.presenter,w=typeof v.sortEntries=='function'?v.sortEntries(t):t,x=w.slice(0,v.maxEntries||r);if(!x.length){this.setState({activeDescendant:null,activeEntries:x,highlightedEntry:null,isAutoHighlight:this.props.autoHighlight});this._setViewIsVisible(false);return;}var y=this.state.highlightedEntry,z=y&&x.indexOf(y)!==-1;if(!this.props.autoHighlight){this.setState({activeEntries:x,highlightedEntry:z?y:null});this._setViewIsVisible(true);return;}var aa=this.state.isAutoHighlight;if(aa){y=x[0];}else{y=z?y:x[0];aa=!z;}this.setState({activeEntries:x,highlightedEntry:y,isAutoHighlight:aa});if(this.state.focused&&this.props.showEntriesOnFocus||this.props.queryString.length>0)this._setViewIsVisible(true);},_onInputFocus:function(){if((this.state.activeEntries.length&&this.state.queryString)||this.props.showEntriesOnFocus)this._setViewIsVisible(true);this.setState({focused:true});this.props.onFocus&&this.props.onFocus();},_onInputBlur:function(){if(this.props.hideViewWithEntries){this._setViewIsVisible(false);this.clearActiveEntries();}if(this.props.selectOnBlur&&this.state.highlightedEntry)this.props.onSelectAttempt(this.state.highlightedEntry);this.setState({focused:false});this.props.onBlur&&this.props.onBlur();},_onInputClick:function(){var t=this.getTextFieldDOM(),u=i.get(t);if(u.start==u.end)t.select();this.props.onClick&&this.props.onClick();},_onEnter:function(event){if(!this.state.viewIsVisible)return;if(!this.state.highlightedEntry){event.preventDefault();return;}if(this.props.hideViewWithEntries)this._setViewIsVisible(false);if(this.props.onSelectAttempt)this.props.onSelectAttempt(this.state.highlightedEntry);event.preventDefault();},_onTab:function(event){if(this.state.viewIsVisible&&this.props.onSelectAttempt&&this.state.highlightedEntry){if(this.props.hideViewWithEntries){this._setViewIsVisible(false);event.preventDefault();}this.props.onSelectAttempt(this.state.highlightedEntry);}},_onDownArrow:function(event){event.preventDefault();m.moveDown(this.state.activeEntries,this.state.highlightedEntry,this._setHighlight);},_onUpArrow:function(event){event.preventDefault();m.moveUp(this.state.activeEntries,this.state.highlightedEntry,this._setHighlight);},_setHighlight:function(t){this.setState({highlightedEntry:t,isAutoHighlight:!t});},_onInputChange:function(event){if(this.props.onChange)this.props.onChange(event);this._setViewIsVisible(this.state.focused&&(this.props.showEntriesOnFocus||event.target.value.length>0)&&this.state.activeEntries.length>0);},_onViewHighlight:function(t){this.setState({highlightedEntry:t,isAutoHighlight:false});},_getView:function(){return (n({Renderer:this.props.presenter.ViewRenderer,extraRendererProps:this.props.presenter.extraRendererProps,highlightedEntry:this.state.highlightedEntry,selectedEntry:this.props.selectedEntry,isVisible:this.state.viewIsVisible,onHighlight:this._onViewHighlight,onRenderHighlight:this._onRenderHighlight,onSelect:this.props.onSelectAttempt,entries:this.state.activeEntries,queryString:this.props.queryString}));},_setViewIsVisible:function(t){if(t!==this.state.viewIsVisible){this.props.onTypeaheadVisibilityChanged&&this.props.onTypeaheadVisibilityChanged(t);this.setState({viewIsVisible:t});}},componentWillReceiveProps:function(t){if(!t.queryString&&!this.props.showEntriesOnFocus)this.clearActiveEntries();},renderLayers:function(){if(!this.props.presenter.useLayer)return {};var t=null,u=null;if(this.props.context){t=this.props.context;}else u='input';return {typeaheadView:h({containerWidthMatchContext:this.props.entriesWidthMatchContext,contextRef:u,context:t,position:"below",shown:this.state.viewIsVisible,shouldSetARIAProperties:false},this._getView())};},render:function(){var t=l({'aria-activedescendant':this.state.activeDescendant,'aria-autocomplete':"list",ref:"input",className:this.props.inputClassName,queryString:this.props.queryString,placeholder:this.props.placeholder,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,searchOnFocus:!!this.props.showEntriesOnFocus,disabled:this.props.disabled,onEntriesFound:this._onEntriesFound,onBlur:this._onInputBlur,onFocus:this._onInputFocus,onChange:this._onInputChange,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,onTab:this._onTab,onEnter:this._onEnter,onBackspace:this.props.onBackspace,onPaste:this.props.onPaste,onClick:this._onInputClick}),u=null;if(!this.props.presenter.useLayer)u=this._getView();return this.transferPropsTo(j.DOM.span({className:"_58ah"},{searchableInput:t,view:u}));},componentDidMount:function(){if(this.props.focusedOnInit)this.refs.input.focusInput();},clearActiveEntries:function(){this.setState({activeDescendant:null,activeEntries:[],highlightedEntry:null});},focusInput:function(){this.refs.input.focusInput();},blurInput:function(){this.refs.input.blur();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();}});e.exports=s;});
__d("WebMessengerEvents",["Arbiter","copyProperties"],function(a,b,c,d,e,f,g,h){var i=h(new g(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});e.exports=i;});
__d("WebMessengerSubscriptionsHandler",["SubscriptionsHandler"],function(a,b,c,d,e,f,g){var h=new g('webmessenger');e.exports=h;});
__d("isWebMessengerURI",[],function(a,b,c,d,e,f){function g(h){return (/^(\/messages)/).test(h.getPath());}e.exports=g;});
__d("WebMessengerWidthControl",["Arbiter","CSS","CSSClassTransition","DOMDimensions","Event","Style","URI","ViewportBounds","WebMessengerEvents","WebMessengerSubscriptionsHandler","$","cx","isWebMessengerURI","requestAnimationFrame","setTimeoutAcrossTransitions","shield","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=205,y=981,z=257,aa=18,ba=848,ca=724,da=.57,ea=56,fa,ga,ha;function ia(na,oa,pa){this.masterChanged=na;this.detailChaned=oa;p.addSubscriptions(k.listen(window,'resize',w(v(ja,this,this),100)),g.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide'],v(ja,this,this),g.SUBSCRIBE_NEW));var qa=ma()?ea:0;if(pa)qa=x;this._width=ma()?0:ba;ha=true;ja(this,qa);}function ja(na,oa){var pa=n.getRight()+n.getLeft();pa=pa||oa||0;var qa=j.getViewportWithoutScrollbarDimensions().width-pa,ra=Math.round(Math.max(0,qa/2-y/2));qa=y+ra-z;qa-=aa;qa=Math.max(ca,Math.min(ba,qa));if(!isNaN(qa)&&na._width!==qa){na._width=qa;var sa=Math.round(qa/(1+da)),ta=qa-sa;na.masterChanged(ta);na.detailChaned(sa);if(ma()){var ua=qa+z;ka(function(){if(ga){document.body.className=ga;ga='';}la(ua+'px');h.removeClass(document.body,"_5262");ha&&o.detailDOMChanged();ha=false;},ga);}}}function ka(na,oa){oa&&h.addClass(document.documentElement,"_5261");t(na);oa&&u(h.removeClass.bind(null,document.documentElement,"_5261"),1000);}function la(na){l.set(q('pageHead'),'width',na);l.set(q('globalContainer'),'width',na);}function ma(){if(!fa)fa=h.hasClass(document.body,"_6nw");return fa;}i.registerHandler(function(na,oa,pa,qa){function ra(sa){return ma()&&s(m(sa));}if(ra(qa)){ga=oa;return true;}else if(ra(pa)){ka(function(){na.className=oa;la('');},true);return true;}});e.exports=ia;});
__d("Dock",["Event","shield","Arbiter","ArbiterMixin","ChatQuietLinks","CSS","DataStore","DOM","Parent","Style","Toggler","Vector","copyProperties","csx","emptyFunction","ge","WebMessengerWidthControl"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b('WebMessengerWidthControl');function w(){}s(w,j,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(x){this.init=u;this.rootEl=x;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();k.removeEmptyHrefs(this.rootEl);g.listen(x,'click',this._onClick.bind(this));g.listen(window,'resize',this._onWindowResize.bind(this));q.subscribe(['show','hide'],function(y,z){var aa=z.getActive();if(!n.contains(x,aa))return;if(l.hasClass(aa,'fbNub')){this.notifyNub(aa,y);if(y==='show')this._resizeNubFlyout(aa);}else{var ba=o.byClass(aa,'fbNubFlyout');if(ba)l.conditionClass(ba,'menuOpened',y==='show');}}.bind(this));this.inform('init',{},i.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=r.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+r.getElementDimensions(this.rootEl).y;var x=v('blueBar');if(x){var y=p.isFixed(x)?'viewport':'document';this.flyoutHeightOffset+=r.getElementPosition(x,y).y+r.getElementDimensions(x).y;}},toggle:function(x){var y=this._findFlyout(x);if(!y)return;this.subscribe('init',function(){q.toggle(x);});},show:function(x){this.subscribe('init',function(){q.show(x);});},showNub:function(x){l.show(x);},hide:function(x){this.subscribe('init',function(){var y=q.getInstance(x);n.contains(x,y.getActive())&&y.hide();});},hideNub:function(x){l.hide(x);this.hide(x);},setUseMaxHeight:function(x,y){l.conditionClass(x,'maxHeight',y!==false);this._resizeNubFlyout(x);},_resizeNubFlyout:function(x){var y=this._findFlyout(x);if(!y||!(l.hasClass(x,'openToggler')||l.hasClass(x,'opened')))return;var z=n.find(y,'div.fbNubFlyoutOuter'),aa=n.find(z,'div.fbNubFlyoutInner'),ba=n.find(aa,'div.fbNubFlyoutBody'),ca=ba.scrollTop,da=ba.offsetHeight;p.set(ba,'height','auto');var ea=r.getElementDimensions(y),fa=r.getElementDimensions(ba),ga=this.getMaxFlyoutHeight(x);p.set(y,'max-height',ga+'px');p.set(z,'max-height',ga+'px');ea=r.getElementDimensions(y);var ha=r.getElementDimensions(aa),ia=ha.y-fa.y,ja=ea.y-ia,ka=parseInt(ba.style.height||ba.clientHeight,10),la=ja!==ka;if(ea.y>ia&&la)p.set(ba,'height',ja+'px');l.removeClass(y,'swapDirection');var ma=r.getElementPosition(y).x;l.conditionClass(y,'swapDirection',function(){if(ma<0)return true;return (ma+ea.x>this.viewportDimensions.x);}.bind(this)());if(la&&ca+da>=fa.y){ba.scrollTop=ba.scrollHeight;}else ba.scrollTop=ca;this.notifyNub(x,'resize');},getMaxFlyoutHeight:function(x){var y=this._findFlyout(x),z=r.getElementPosition(y,'viewport'),aa=r.getElementDimensions(y),ba=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-z.y-aa.y);return Math.max(ba,0);},resizeAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this._resizeNubFlyout(x[y]);},hideAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this.hide(x[y]);},_getAllNubs:function(){var x=n.scry(this.rootEl,"div._50-v.openToggler");return x.concat(n.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var x=event.getTarget(),y=o.byClass(x,'fbNub');if(y){if(o.byClass(x,'fbNubFlyoutTitlebar')){var z=o.byTag(x,'a'),aa=x.nodeName=='INPUT'&&x.getAttribute('type')=='submit';if(!z&&!aa){this.hide(y);return false;}}this.notifyNub(y,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(x){return l.hasClass(x,'fbNubFlyout')?x:n.scry(x,'div.fbNubFlyout')[0]||null;},registerNubController:function(x,y){m.set(x,'dock:nub:controller',y);y.subscribe('nub/button/content-changed',h(this.inform,this,'resize',x));y.subscribe('nub/flyout/content-changed',h(this._resizeNubFlyout,this,x));},unregisterNubController:function(x){m.remove(x,'dock:nub:controller');},notifyNub:function(x,y,z){var aa=m.get(x,'dock:nub:controller');aa&&aa.inform(y,z);}});e.exports=a.Dock||w;});
__d("BanzaiScribe",["Banzai"],function(a,b,c,d,e,f,g){function h(j){return {log:function(k,l,m){var n=[l];if(m!=null)n.push(m);g.post('scribe:'+k,n,j);}};}var i=h({});i.create=h;e.exports=i;});
__d("RangedCallbackManager",["CallbackManagerController","copyProperties","createObjectFrom"],function(a,b,c,d,e,f,g,h,i){var j=function(k,l,m){this._resources=[];this._reachedEndOfArray=false;this._error=false;this._existingIDs={};this._controller=new g(this._constructCallbackArg.bind(this));this._getValueHandler=k;this._compareValuesHandler=l;this._skipOnStrictHandler=m;};h(j.prototype,{executeOrEnqueue:function(k,l,m,n,o){return this._controller.executeOrEnqueue({start:k,limit:l},m,{strict:!!n,skipOnStrictHandler:o});},unsubscribe:function(k){this._controller.unsubscribe(k);},getUnavailableResources:function(k){var l=this._controller.getRequest(k),m=[];if(l&&!this._reachedEndOfArray){var n=l.request,o=this._filterForStrictResults(l.options),p=n.start+n.limit;for(var q=o.length;q<p;q++)m.push(q);}return m;},addResources:function(k){k.forEach(function(l){if(!this._existingIDs[l]){this._existingIDs[l]=true;this._resources.push(l);this._error=null;}}.bind(this));this.resortResources();this._controller.runPossibleCallbacks();},addResourcesWithoutSorting:function(k,l){var m=this._resources.slice(0,l);m=m.concat(k);m=m.concat(this._resources.slice(l));this._resources=m;h(this._existingIDs,i(k,true));this._error=null;this._controller.runPossibleCallbacks();},removeResources:function(k){k.forEach(function(l){if(this._existingIDs[l]){this._existingIDs[l]=false;var m=this._resources.indexOf(l);if(m!=-1)this._resources.splice(m,1);}}.bind(this));},removeAllResources:function(){this._resources=[];this._existingIDs={};},resortResources:function(){this._resources=this._resources.sort(function(k,l){return this._compareValuesHandler(this._getValueHandler(k),this._getValueHandler(l));}.bind(this));},setReachedEndOfArray:function(){if(!this._reachedEndOfArray){this._reachedEndOfArray=true;this._error=null;this._controller.runPossibleCallbacks();}},hasReachedEndOfArray:function(){return this._reachedEndOfArray;},setError:function(k){if(this._error!==k){this._error=k;this._controller.runPossibleCallbacks();}},getError:function(k,l,m){var n=this._filterForStrictResults({strict:m});return k+l>n.length?this._error:null;},hasResource:function(k){return this._existingIDs[k];},getResourceAtIndex:function(k){return this._resources[k];},getAllResources:function(){return this._resources.concat();},getCurrentArraySize:function(k){return this._filterForStrictResults(k).length;},_filterForStrictResults:function(k){var l=this._resources;if(k&&k.strict){var m=k.skipOnStrictHandler||this._skipOnStrictHandler;if(m)l=l.filter(m);}return l;},_constructCallbackArg:function(k,l){var m=this._filterForStrictResults(l);if(!this._reachedEndOfArray&&!this._error&&k.start+k.limit>m.length){return false;}else{var n=m.slice(k.start,k.start+k.limit),o=k.start+k.limit>m.length?this._error:null;return [n,o];}},getElementsUntil:function(k){var l=[];for(var m=0;m<this._resources.length;m++){var n=this._getValueHandler(this._resources[m]);if(this._compareValuesHandler(n,k)>0)break;l.push(this._resources[m]);}return l;}});e.exports=j;});
__d("BlobFactory",["emptyFunction"],function(a,b,c,d,e,f,g){var h,i=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;if(a.Blob){var j;try{new a.Blob();j=true;}catch(k){j=false;}h={getBlob:function(l,m){l=l||[];m=m||{};if(j){return new a.Blob(l,m);}else{var n=new i();for(var o=0;o<l.length;o++)n.append(l[o]);return n.getBlob(m.type);}},isSupported:g.thatReturnsTrue};}else h={getBlob:function(){},isSupported:g.thatReturnsFalse};e.exports=h;});
__d("mergeObjects",["copyProperties"],function(a,b,c,d,e,f,g){function h(){var i={};for(var j=0;j<arguments.length;j++)g(i,arguments[j]);return i;}e.exports=h;});
__d("URLMatcher",[],function(a,b,c,d,e,f){var g='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',h='\u2000-\u206F\u00ab\u00bb\uff08\uff09',i='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',j='(?:(?:ht|f)tps?)://',k='(?:(?:'+i+'[.]){3}'+i+')',l='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',m='(?:\\b)www\\d{0,3}[.]',n='[^\\s'+g+h+']',o='(?:(?:(?:[.:\\-_%@]|'+n+')*'+n+')|'+l+')',p='(?:[.][a-z]{2,4})',q='(?::\\d+){0,1}',r='(?=[/?#])',s='(?:'+'(?:'+j+o+q+')|'+'(?:'+k+q+')|'+'(?:'+l+q+')|'+'(?:'+m+o+p+q+')|'+'(?:'+o+p+q+r+')'+')',t='[/#?]',u='\\([^\\s()<>]+\\)',v='[^\\s()<>?#]+',w=new RegExp(s,'im'),x='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',y=new RegExp(x,'im'),z='(?:'+'(?:'+t+')'+'(?:'+'(?:'+u+'|'+v+')*'+')*'+')*',aa=new RegExp('('+'(?:'+s+')'+'(?:'+z+')'+')','im'),ba=new RegExp('('+'(?:'+j+o+q+')|'+'(?:'+m+o+p+q+')'+')'),ca=/[\s'";]/,da=new RegExp(t,'im'),ea=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^_`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),fa=new RegExp('[\\s()<>?#]','im'),ga=new RegExp('\\s()<>'),ha=function(oa){if(oa&&oa.indexOf('@')!=-1){return (ba.exec(oa))?oa:null;}else return oa;},ia=function(oa){return ja(oa,aa);},ja=function(oa,pa){var qa=(pa.exec(oa)||[])[1]||null;return ha(qa);},ka=function(oa){return w.exec(oa);},la=function(oa){return !ca.test(oa.charAt(oa.length-1));},ma=function(oa){do{var pa=w.exec(oa);if(!pa)return null;var qa=false;if(pa[0][0]==='['&&pa.index>0&&oa[pa.index-1]==='@'){var ra=y.exec(pa[0]);if(ra){qa=true;oa=oa.substr(pa.index+ra[0].length);}}}while(qa);var sa=oa.substr(pa.index+pa[0].length);if(sa.length===0||!(da.test(sa[0])))return ha(pa[0]);var ta=0,ua=0,va=1,wa=0,xa=ua;for(var ya=1;ya<sa.length;ya++){var za=sa[ya];if(xa===ua){if(za==='('){wa=wa+1;xa=va;}else if(da.test(za)||!(ea.test(za))){ta=ya;}else if(fa.test(za))break;}else if(za==='('){wa=wa+1;}else if(za===')'){wa=wa-1;if(wa===0){xa=ua;ta=ya;}}else if(ga.test(za))break;}return ha(pa[0]+sa.substring(0,ta+1));},na={};na.permissiveMatch=ia;na.matchToPattern=ja;na.matchHost=ka;na.trigger=la;na.match=ma;e.exports=na;});
__d("PhotosUploadWaterfallXMixin",["AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","copyProperties","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(o,p){var q={};o.client_time=Math.round(Date.now()/1000);if(i.retryBanzai){q.retry=true;o.nonce=l(4294967296);}h.post(i.banzaiRoute,o,q);if(p)setTimeout(p,0);}function n(o,p){if(i.useBanzai){m(o,p);}else{var q=new g(i.loggingEndpoint,{data:JSON.stringify(o)}).setHandler(p);if(i.timeout)q.setTimeout(10*1000);q.send();}}e.exports={logStep:function(o,p,q){var r=this.getWaterfallID&&this.getWaterfallID(),s=this.getWaterfallAppName&&this.getWaterfallAppName();if(!r||!s)return;n(j({step:o,qn:r,uploader:s,ref:this.getWaterfallSource&&this.getWaterfallSource()},p),q);}};});
__d("OrderedMap",["invariant","mixInto"],function(a,b,c,d,e,f,g,h){"use strict";var i='key:';function j(q,r){var s={};for(var t=0;t<q.length;t++){var u=q[t],v=r(u);l(v);var w=i+v;g(!(w in s));s[w]=u;}return s;}function k(q,r){this._normalizedObj=q;this._computedPositions=null;this.length=r;}function l(q){g(q!==''&&(typeof q==='string'||typeof q==='number'));}function m(q,r,s){g(typeof q==='number'&&typeof r==='number'&&r>=0&&q>=0&&q+r<=s);}function n(q,r){g(q&&q.constructor===Object&&(!r||r.constructor===Object));var s={},t=0,u;for(u in q)if(q.hasOwnProperty(u)){s[u]=q[u];t++;}for(u in r)if(r.hasOwnProperty(u)){if(!(u in s))t++;s[u]=r[u];}return new k(s,t);}var o={has:function(q){l(q);var r=i+q;return r in this._normalizedObj;},get:function(q){l(q);var r=i+q;return this.has(q)?this._normalizedObj[r]:undefined;},merge:function(q){g(q instanceof k);return n(this._normalizedObj,q._normalizedObj);},map:function(q,r){return this.mapRange(q,0,this.length,r);},mapRange:function(q,r,s,t){var u=this._normalizedObj,v={},w=0;m(r,s,this.length);var x=r+s-1;for(var y in u)if(u.hasOwnProperty(y)){if(w>=r){if(w>x)break;var z=u[y];v[y]=q.call(t,z,y.substr(i.length),w);}w++;}return new k(v,s);},filter:function(q,r){return this.filterRange(q,0,this.length,r);},filterRange:function(q,r,s,t){var u={},v=0;this.forEachRange(function(w,x,y){if(q.call(t,w,x,y)){var z=i+x;u[z]=w;v++;}},r,s);return new k(u,v);},forEach:function(q,r){this.forEachRange(q,0,this.length,r);},forEachRange:function(q,r,s,t){m(r,s,this.length);var u=this._normalizedObj,v=0,w=r+s-1;for(var x in u)if(u.hasOwnProperty(x)){if(v>=r){if(v>w)break;var y=u[x];q.call(t,y,x.substr(i.length),v);}v++;}},mapKeyRange:function(q,r,s,t){var u=this.indexOfKey(r),v=this.indexOfKey(s);g(u!==undefined&&v!==undefined);g(v>=u);return this.mapRange(q,u,(v-u)+1,t);},forEachKeyRange:function(q,r,s,t){var u=this.indexOfKey(r),v=this.indexOfKey(s);g(u!==undefined&&v!==undefined);g(v>=u);this.forEachRange(q,u,(v-u)+1,t);},keyAtIndex:function(q){var r=this._getOrComputePositions(),s=r.keyByIndex[q];return s?s.substr(i.length):undefined;},keyAfter:function(q){return this.nthKeyAfter(q,1);},keyBefore:function(q){return this.nthKeyBefore(q,1);},nthKeyAfter:function(q,r){var s=this.indexOfKey(q);g(s!==undefined);return this.keyAtIndex(s+r);},nthKeyBefore:function(q,r){return this.nthKeyAfter(q,-r);},indexOfKey:function(q){l(q);var r=i+q,s=this._getOrComputePositions(),t=s.indexByKey[r];return t===undefined?undefined:t;},toArray:function(){var q=[],r=this._normalizedObj;for(var s in r)if(r.hasOwnProperty(s))q.push(r[s]);return q;},_getOrComputePositions:function(){var q=this._computedPositions;if(!q)this._computePositions();return this._computedPositions;},_computePositions:function(){this._computedPositions={keyByIndex:{},indexByKey:{}};var q=this._computedPositions.keyByIndex,r=this._computedPositions.indexByKey,s=0,t=this._normalizedObj;for(var u in t)if(t.hasOwnProperty(u)){q[s]=u;r[u]=s;s++;}}};h(k,o);var p={from:function(q){g(q instanceof k);return n(q._normalizedObj,null);},fromArray:function(q,r){g(Array.isArray(q));g(typeof r==='function');return new k(j(q,r),q.length);}};e.exports=p;});
__d("AbstractSearchSource",["Deferred","emptyFunction","mixInto"],function(a,b,c,d,e,f,g,h,i){function j(){}var k={bootstrap:function(l){l=l||h;if(this._bootstrapped){l();return;}if(this._bootstrapDeferred)return this._bootstrapDeferred.addCallback(l);this._bootstrapDeferred=new g();this._bootstrapDeferred.addCallback(l);this.bootstrapImpl(function(){this._bootstrapped=true;this._bootstrapDeferred.succeed();this._bootstrapDeferred=null;}.bind(this));return this._bootstrapDeferred;},search:function(l,m,n){this.searchImpl(l,m,n);},bootstrapImpl:function(l){l();},searchImpl:function(l,m,n){throw new Error('Abstract method #searchImpl is not implemented.');}};i(j,k);j.Mixin=k;e.exports=j;});
__d("SearchSourceCallbackManager",["createObjectFrom","invariant"],function(a,b,c,d,e,f,g,h){function i(k){"use strict";this.$SearchSourceCallbackManager0=k.parseFn;h(typeof this.$SearchSourceCallbackManager0==='function');this.$SearchSourceCallbackManager1=k.matchFn;h(typeof this.$SearchSourceCallbackManager1==='function');this.$SearchSourceCallbackManager2=k.alwaysPrefixMatch||false;this.$SearchSourceCallbackManager3=k.indexFn||j;this.reset();}i.prototype.search=function(k,l,m){"use strict";var n=this.$SearchSourceCallbackManager4(k,l,m);if(n)return 0;this.$SearchSourceCallbackManager5.push({queryString:k,callback:l,options:m});var o=this.$SearchSourceCallbackManager5.length-1;this.$SearchSourceCallbackManager6.push(o);return o;};i.prototype.$SearchSourceCallbackManager4=function(k,l,m){"use strict";var n=this.$SearchSourceCallbackManager7(k),o=!!this.$SearchSourceCallbackManager8[k];if(!n.length){l([],k);return o;}var p=n.map(function(q){return this.$SearchSourceCallbackManager9[q];},this);l(p,k);return o;};i.prototype.$SearchSourceCallbackManagera=function(){"use strict";var k=this.$SearchSourceCallbackManager6;this.$SearchSourceCallbackManager6=[];k.forEach(this.$SearchSourceCallbackManagerb,this);};i.prototype.$SearchSourceCallbackManagerb=function(k){"use strict";var l=this.$SearchSourceCallbackManager5[k];if(!l)return;var m=this.$SearchSourceCallbackManager4(l.queryString,l.callback,l.options);if(m){delete this.$SearchSourceCallbackManager5[k];return;}this.$SearchSourceCallbackManager6.push(k);};i.prototype.reset=function(){"use strict";this.$SearchSourceCallbackManager9={};this.$SearchSourceCallbackManagerc={};this.$SearchSourceCallbackManagerd={};this.$SearchSourceCallbackManagere={};this.$SearchSourceCallbackManager8={};this.$SearchSourceCallbackManager6=[];this.$SearchSourceCallbackManager5=[undefined];};i.prototype.addLocalEntries=function(k){"use strict";k.forEach(function(l){var m=l.getUniqueID(),n=this.$SearchSourceCallbackManager3(l);this.$SearchSourceCallbackManager9[m]=l;this.$SearchSourceCallbackManagerc[m]=n;var o=this.$SearchSourceCallbackManager0(n);o.tokens.forEach(function(p){if(!this.$SearchSourceCallbackManagerd.hasOwnProperty(p))this.$SearchSourceCallbackManagerd[p]={};this.$SearchSourceCallbackManagerd[p][m]=true;},this);},this);this.$SearchSourceCallbackManagera();};i.prototype.addQueryEntries=function(k,l){"use strict";var m=this.$SearchSourceCallbackManager7(l),n=this.$SearchSourceCallbackManager0(l).flatValue;this.$SearchSourceCallbackManagere[n]=g(m,true);k.forEach(function(o){var p=o.getUniqueID();this.$SearchSourceCallbackManager9[p]=o;this.$SearchSourceCallbackManagerc[p]=this.$SearchSourceCallbackManager3(o);this.$SearchSourceCallbackManagere[n][p]=true;},this);this.$SearchSourceCallbackManagera();};i.prototype.unsubscribe=function(k){"use strict";delete this.$SearchSourceCallbackManager5[k];};i.prototype.removeEntry=function(k){"use strict";delete this.$SearchSourceCallbackManager9[k];};i.prototype.getAllEntriesMap=function(){"use strict";return this.$SearchSourceCallbackManager9;};i.prototype.setQueryStringAsExhausted=function(k){"use strict";this.$SearchSourceCallbackManager8[k]=true;};i.prototype.unsetQueryStringAsExhausted=function(k){"use strict";delete this.$SearchSourceCallbackManager8[k];};i.prototype.$SearchSourceCallbackManager7=function(k){"use strict";var l=this.$SearchSourceCallbackManagerf(k,this.$SearchSourceCallbackManagerg(k)),m=this.$SearchSourceCallbackManagerf(k,this.$SearchSourceCallbackManagerh(k)),n=l.concat(m),o={},p=[];n.forEach(function(q){if(!o[q]&&this.$SearchSourceCallbackManager9[q]!==undefined){p.push(q);o[q]=true;}},this);return p;};i.prototype.$SearchSourceCallbackManagerf=function(k,l){"use strict";var m=this.$SearchSourceCallbackManageri(k,l),n=this.$SearchSourceCallbackManager9;function o(p,q){if(m[p]!==m[q])return m[p]?-1:1;var r=n[p],s=n[q];if(r.getOrder()!==s.getOrder())return r.getOrder()-s.getOrder();var t=r.getTitle().length,u=s.getTitle().length;if(t!==u)return t-u;return r.getUniqueID()-s.getUniqueID();}return l.sort(o).slice();};i.prototype.$SearchSourceCallbackManageri=function(k,l){"use strict";var m={};l.forEach(function(n){m[n]=this.$SearchSourceCallbackManager1(k,this.$SearchSourceCallbackManagerc[n]);},this);return m;};i.prototype.$SearchSourceCallbackManagerg=function(k){"use strict";var l=this.$SearchSourceCallbackManager0(k,this.$SearchSourceCallbackManager2),m=this.$SearchSourceCallbackManager2?l.sortedTokens:l.tokens,n=m.length,o=l.isPrefixQuery?n-1:null,p={},q={},r={},s=false,t={},u=0;m.forEach(function(w,x){if(t.hasOwnProperty(w))return;u++;t[w]=true;for(var y in this.$SearchSourceCallbackManagerd){var z=(y===w&&!p.hasOwnProperty(y)),aa=false;if(!z)aa=((this.$SearchSourceCallbackManager2||o===x)&&y.indexOf(w)===0);if(!z&&!aa)continue;if(y===w){if(q.hasOwnProperty(y))s=true;p[y]=true;}else{if(p.hasOwnProperty(y)||q.hasOwnProperty(y))s=true;q[y]=true;}for(var ba in this.$SearchSourceCallbackManagerd[y])if(x===0||(r.hasOwnProperty(ba)&&r[ba]==u-1))r[ba]=u;}},this);var v=Object.keys(r).filter(function(w){return r[w]==u;});if(s||u<n)v=this.$SearchSourceCallbackManagerj(k,v);return v;};i.prototype.$SearchSourceCallbackManagerh=function(k){"use strict";var l=this.$SearchSourceCallbackManager0(k).flatValue,m=this.$SearchSourceCallbackManagerk(l);if(this.$SearchSourceCallbackManagere.hasOwnProperty(l))return m;return this.$SearchSourceCallbackManagerj(k,m);};i.prototype.$SearchSourceCallbackManagerk=function(k){"use strict";var l=0,m=null,n=this.$SearchSourceCallbackManagere;Object.keys(n).forEach(function(o){if(k.indexOf(o)===0&&o.length>l){l=o.length;m=o;}});return (n.hasOwnProperty(m)?Object.keys(n[m]):[]);};i.prototype.$SearchSourceCallbackManagerj=function(k,l){"use strict";return l.filter(function(m){return this.$SearchSourceCallbackManager1(k,this.$SearchSourceCallbackManagerc[m]);},this);};function j(k){return [k.getTitle(),k.getKeywordString()].join(' ');}e.exports=i;});
__d("SearchableEntry",["HTML","invariant"],function(a,b,c,d,e,f,g,h){function i(k){switch(typeof k){case 'string':return k;case 'object':var l=g.replaceJSONWrapper(k);if(g.isHTML(l)){var m=l.getRootNode();return m.textContent||m.innerText||'';}else return '';default:return '';}}function j(k){"use strict";h(!!k.uniqueID&&(typeof k.uniqueID==='string'||typeof k.uniqueID==='number'));h(!!k.title&&typeof k.title==='string');this.$SearchableEntry0=k.uniqueID+'';this.$SearchableEntry1=k.title;this.$SearchableEntry2=k.order||0;this.$SearchableEntry3=i(k.subtitle);this.$SearchableEntry4=k.keywordString||'';this.$SearchableEntry5=k.photo||'';this.$SearchableEntry6=k.uri||'';this.$SearchableEntry7=k.type||'';this.$SearchableEntry8=k.auxiliaryData||null;}j.prototype.getUniqueID=function(){"use strict";return this.$SearchableEntry0;};j.prototype.getOrder=function(){"use strict";return this.$SearchableEntry2;};j.prototype.getTitle=function(){"use strict";return this.$SearchableEntry1;};j.prototype.getSubtitle=function(){"use strict";return this.$SearchableEntry3;};j.prototype.getKeywordString=function(){"use strict";return this.$SearchableEntry4;};j.prototype.getPhoto=function(){"use strict";return this.$SearchableEntry5;};j.prototype.getURI=function(){"use strict";return this.$SearchableEntry6;};j.prototype.getType=function(){"use strict";return this.$SearchableEntry7;};j.prototype.getAuxiliaryData=function(){"use strict";return this.$SearchableEntry8;};e.exports=j;});
__d("TypeaheadViewItem",["React","SearchableEntry"],function(a,b,c,d,e,f,g,h){var i={entry:g.PropTypes.instanceOf(h).isRequired,highlighted:g.PropTypes.bool,selected:g.PropTypes.bool,onSelect:g.PropTypes.func.isRequired,onHighlight:g.PropTypes.func,onRenderHighlight:g.PropTypes.func},j={_onSelect:function(k){this.props.onSelect(this.props.entry,k);},_onHighlight:function(k){if(this.props.onHighlight)this.props.onHighlight(this.props.entry,k);},shouldComponentUpdate:function(k){return (this.props.entry.getUniqueID()!==k.entry.getUniqueID()||this.props.highlighted!==k.highlighted||this.props.selected!==k.selected);},componentDidMount:function(){if(this.props.highlighted&&this.props.onRenderHighlight)this.props.onRenderHighlight(this.getDOMNode());},componentDidUpdate:function(){if(this.props.highlighted&&this.props.onRenderHighlight)this.props.onRenderHighlight(this.getDOMNode());}};e.exports={propTypes:i,Mixin:j};});
__d("SystemEvents",["Arbiter","CurrentUser","ErrorUtils","UserAgent","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){var l=new g(),m=[],n=1000;setInterval(function(){for(var w=0;w<m.length;w++)m[w]();},n,false);function o(){return (/c_user=(\d+)/.test(document.cookie)&&RegExp.$1)||0;}var p=h.getID(),q=navigator.onLine;function r(){if(!q){q=true;l.inform(l.ONLINE,q);}}function s(){if(q){q=false;l.inform(l.ONLINE,q);}}if(j.ie()){if(j.ie()>=11){window.addEventListener('online',r,false);window.addEventListener('offline',s,false);}else if(j.ie()>=8){window.attachEvent('onload',function(){document.body.ononline=r;document.body.onoffline=s;});}else m.push(function(){(navigator.onLine?r:s)();});}else if(window.addEventListener)if(!j.chrome()){window.addEventListener('online',r,false);window.addEventListener('offline',s,false);}var t=p;m.push(function(){var w=o();if(t!=w){l.inform(l.USER,w);t=w;}});var u=Date.now();function v(){var w=Date.now(),x=w-u,y=x<0||x>10000;u=w;if(y)l.inform(l.TIME_TRAVEL,x);return y;}m.push(v);m.push(function(){if(window.onerror!=i.onerror)window.onerror=i.onerror;});k(l,{USER:'SystemEvents/USER',ONLINE:'SystemEvents/ONLINE',TIME_TRAVEL:'SystemEvents/TIME_TRAVEL',isPageOwner:function(w){return (w||o())==p;},isOnline:function(){return j.chrome()||q;},checkTimeTravel:v});e.exports=l;});
__d("Dcode",[],function(a,b,c,d,e,f){var g,h={},i={_:'%',A:'%2',B:'000',C:'%7d',D:'%7b%22',E:'%2c%22',F:'%22%3a',G:'%2c%22ut%22%3a1',H:'%2c%22bls%22%3a',I:'%2c%22n%22%3a%22%',J:'%22%3a%7b%22i%22%3a0%7d',K:'%2c%22pt%22%3a0%2c%22vis%22%3a',L:'%2c%22ch%22%3a%7b%22h%22%3a%22',M:'%7b%22v%22%3a2%2c%22time%22%3a1',N:'.channel%22%2c%22sub%22%3a%5b',O:'%2c%22sb%22%3a1%2c%22t%22%3a%5b',P:'%2c%22ud%22%3a100%2c%22lc%22%3a0',Q:'%5d%2c%22f%22%3anull%2c%22uct%22%3a',R:'.channel%22%2c%22sub%22%3a%5b1%5d',S:'%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a',T:'%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a',U:'%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',V:'%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a',W:'%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a',X:'%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1',Y:'%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',Z:'%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a'};(function(){var k=[];for(var l in i){h[i[l]]=l;k.push(i[l]);}k.reverse();g=new RegExp(k.join("|"),'g');})();var j={encode:function(k){return encodeURIComponent(k).replace(/([_A-Z])|%../g,function(l,m){return m?'%'+m.charCodeAt(0).toString(16):l;}).toLowerCase().replace(g,function(l){return h[l];});},decode:function(k){return decodeURIComponent(k.replace(/[_A-Z]/g,function(l){return i[l];}));}};e.exports=j;});
__d("PresenceState",["Arbiter","ErrorUtils","JSLogger","PresenceCookieManager","copyProperties","debounceAcrossTransitions","setIntervalAcrossTransitions","PresenceInitialData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=n.cookiePollInterval||2000,p=[],q=[],r=null,s=null,t=0,u=null,v=0,w=['sb2','t2','lm2','uct2','tr','tw','at','wml'],x=i.create('presence_state');function y(){return j.getSubCookie('state');}function z(){t=Date.now();j.store();da(s);}var aa=l(z,0);function ba(ia){if(typeof ia=='undefined'||isNaN(ia)||ia==Number.POSITIVE_INFINITY||ia==Number.NEGATIVE_INFINITY)ia=0;return ia;}function ca(ia){var ja={};if(ia){w.forEach(function(ma){ja[ma]=ia[ma];});if(t<ia.ut)x.error('new_cookie',{cookie_time:ia.ut,local_time:t});}ja.ut=t;for(var ka=0,la=p.length;ka<la;ka++)h.applyWithGuard(p[ka],null,[ja]);s=ja;return s;}function da(ia){v++;t=ba(ia.ut);if(!r)r=m(ga,o);s=ia;if(u===null)u=ia;for(var ja=0,ka=q.length;ja<ka;ja++)h.applyWithGuard(q[ja],null,[ia]);v--;}function ea(ia){if(ia&&ia.ut)if(t<ia.ut){return true;}else if(ia.ut<t)x.error('old_cookie',{cookie_time:ia.ut,local_time:t});return false;}function fa(){var ia=y();if(ea(ia))s=ia;return s;}function ga(){var ia=y();if(ea(ia))da(ia);}j.register('state',ca);g.subscribe(i.DUMP_EVENT,function(ia,ja){ja.presence_state={initial:k({},u),state:k({},s),update_time:t,sync_paused:v,poll_time:o};});(function(){var ia=fa();if(ia){da(ia);}else{x.debug('no_cookie_initial');da(ca());return;}})();var ha={doSync:function(ia){if(v)return;if(ia){z();}else aa();},registerStateStorer:function(ia){p.push(ia);},registerStateLoader:function(ia){q.push(ia);},get:function(){return fa();},getInitial:function(){return u;},verifyNumber:ba};e.exports=ha;});
__d("Poller",["ArbiterMixin","AsyncRequest","Cookie","CurrentUser","copyProperties","emptyFunction","mixin","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=m(g);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(u){"use strict";this._config=k({clearOnQuicklingEvents:true,setupRequest:l,interval:null,maxRequests:Infinity,dontStart:false},u);if(!this._config.dontStart)this.start();}r.prototype.start=function(){"use strict";if(this._polling)return this;this._requests=0;this.request();return this;};r.prototype.stop=function(){"use strict";this._cancelRequest();return this;};r.prototype.mute=function(){"use strict";this._muted=true;return this;};r.prototype.resume=function(){"use strict";if(this._muted){this._muted=false;if(!this._handle&&this._polling)return this.request();}return this;};r.prototype.skip=function(){"use strict";this._skip=true;return this;};r.prototype.reset=function(){"use strict";return this.stop().start();};r.prototype.request=function(){"use strict";this._cancelRequest();this._polling=true;if(!t())return this._done();if(this._muted)return this;if(++this._requests>this._config.maxRequests)return this._done();var u=new h(),v=false;u.setInitialHandler(function(){return !v;});this._cancelRequest=function(){v=true;this._cleanup();}.bind(this);u.setFinallyHandler(s.bind(this));u.setInitialHandler=l;u.setFinallyHandler=l;this._config.setupRequest(u,this);if(this._skip){this._skip=false;setTimeout(s.bind(this),0);}else u.send();return this;};r.prototype.isPolling=function(){"use strict";return this._polling;};r.prototype.isMuted=function(){"use strict";return this._muted;};r.prototype.setInterval=function(u){"use strict";if(u){this._config.interval=u;this.start();}};r.prototype.getInterval=function(){"use strict";return this._config.interval;};r.prototype._cleanup=function(){"use strict";if(this._handle)clearTimeout(this._handle);this._handle=null;this._cancelRequest=l;this._polling=false;};r.prototype._done=function(){"use strict";this._cleanup();this.inform('done',{sender:this});return this;};r.MIN_INTERVAL=2000;k(r.prototype,{_config:null,_requests:0,_muted:false,_polling:false,_skip:false,_cancelRequest:l});function s(){if(!this._polling)return;if(this._requests<this._config.maxRequests){var u=this._config.interval;u=typeof u==='function'?u(this._requests):u;u=(u>r.MIN_INTERVAL)?u:r.MIN_INTERVAL;if(this._config.clearOnQuicklingEvents){this._handle=setTimeout(this.request.bind(this),u);}else this._handle=n(this.request.bind(this),u);}else this._done();}function t(){return j.getID()==i.get('c_user');}e.exports=r;});
__d("ChatTabModel",["Arbiter","ArbiterMixin","ChatBehavior","ChatConfig","JSLogger","MercuryAssert","PresenceInitialData","PresenceState","PresenceUtil","areJSONRepresentationsEqual","arrayContains","copyProperties","MercuryServerRequests","MercuryMessages","MercuryThreads","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=b('MercuryServerRequests').get(),t=b('MercuryMessages').get(),u=b('MercuryThreads').get(),v=b('MercuryTimestampTracker').get(),w=[],x=null,y=null,z=null,aa=null;function ba(){return parseInt(m.serverTime,10);}var ca=j.get('tab_max_load_age')||3600000,da=ba()-ca,ea=0,fa=20,ga=k.create('chat_tab_model'),ha=false;function ia(bb){var cb=n.verifyNumber(bb.uct2);if(!cb||typeof cb!=='number'){ga.warn('bad_cookie_version',bb.uct2);return null;}if(cb<ea||cb<da)return null;return cb;}function ja(bb){var cb=ia(bb);if(!cb){var db={};db.old_tabs=bb&&bb.t2&&JSON.stringify(bb.t2);db.old_promoted=bb&&bb.lm2;db.old_time=bb&&bb.uct2;db.old_reason=bb&&bb.tr;db.old_window=bb&&bb.tw;var eb;if(y&&bb.t2)for(var fb=0;fb<bb.t2.length;fb++){var gb=bb.t2[fb];if(gb.i===y)eb=gb.r;}var hb=[];w.forEach(function(ib){if(!ib.fragile){var jb={i:ib.id,si:ib.server_id};if(ib.raised||(ib.id===y&&eb))jb.r=1;hb.push(jb);}});bb.t2=hb;bb.uct2=ea;bb.lm2=x;bb.tr=aa;bb.tw=o.getSessionID();db.new_tabs=JSON.stringify(bb.t2);db.new_promoted=bb.lm2;db.new_time=bb.uct2;db.new_reason=bb.tr;db.new_window=bb.tw;ga.debug('store',db);}return bb;}function ka(bb){if(bb){var cb=ia(bb);if(cb&&cb!==ea){var db={};db.old_tabs=JSON.stringify(w);db.old_promoted=x;db.old_time=ea;db.old_reason=aa;db.window_id=o.getSessionID();db.cookie_tabs=bb&&bb.t2&&JSON.stringify(bb.t2);db.cookie_promoted=bb&&bb.lm2;db.cookie_time=bb&&bb.uct2;db.cookie_reason=bb&&bb.tr;db.cookie_window=bb&&bb.tw;ea=cb;aa='load';var eb=la(bb.t2,bb.lm2||null);db.load_result=eb;db.new_tabs=JSON.stringify(w);db.new_promoted=x;db.new_time=ea;db.new_reason=aa;var event='load';if(!ha)event+='_init';ga.log(event,db);return eb;}}return false;}function la(bb,cb){if(ma(bb,cb)){var db=w.filter(function(gb){return gb.fragile;}),eb={};x=null;w=bb.map(function(gb){var hb={id:gb.i,server_id:gb.si};if(hb.id==cb)x=hb.id;if(y==gb.i){var ib=ra(y);if(ib!=-1){hb.raised=w[ib].raised;return hb;}else return null;}if(gb.r)hb.raised=true;eb[hb.id]=hb;return hb;});w=w.filter(function(gb){return gb!=null;});if(z)for(var fb in z)if(!eb[fb]||!eb[fb].raised)delete z[fb];db=db.filter(function(gb){return !eb[gb.id];});w=w.concat(db);qa();return true;}return false;}function ma(bb,cb){if(cb!=x)return true;var db=w.filter(function(gb){return !gb.fragile;});if(bb.length!=db.length)return true;for(var eb=0,fb=bb.length;eb<fb;eb++){if(bb[eb].id===y)continue;if(!p(bb[eb],db[eb]))return true;}return false;}function na(bb,cb,db){var eb=ka(n.get());if(cb===undefined||cb>ea){if(bb()){eb=true;aa=db||null;pa(cb);}}else ga.error('rejected',{change_time:cb,state_time:ea});eb&&oa();}function oa(){if(ha)za.inform('chat/tabs-changed',za.get());}function pa(bb){if(bb===undefined)bb=Math.max(v.getLastUserMessageTimestamp()||1,ea+1);ea=bb;n.doSync();}function qa(bb){var cb=w.length-fa;if(cb>0)w=w.filter(function(db){return db.raised||db.id==bb||cb--<=0;});if(cb>0)w=w.filter(function(db){return db.id==x||db.id==bb||cb--<=0;});}function ra(bb){for(var cb=0;cb<w.length;cb++)if(w[cb].id==bb)return cb;return -1;}function sa(bb,cb){var db=u.getThreadMetaNow(bb);if(!db)return false;if(db.is_canonical_user){return va(bb,cb);}else{var eb=ta(bb);if(eb)s.getServerThreadID(bb,function(fb){if(xa(bb,fb)){pa();oa();}});return eb;}}function ta(bb){if(ra(bb)===-1){w.push({id:bb,fragile:true});ga.log('open_fragile_tab',{tabs:JSON.stringify(w),opened:bb,window_id:o.getSessionID()});return true;}return false;}function ua(bb){var cb=[];bb.forEach(function(db){var eb=ra(db);if(eb!==-1)cb.push(w[eb]);});w.forEach(function(db){if(!q(bb,db.id))cb.push(db);});na(function(){if(ma(cb,x)){w=cb;return true;}return false;});}function va(bb,cb){var db=ra(bb);if(db!=-1)if(w[db].fragile){w.splice(db,1);}else{cb&&(w[db].signatureID=cb);return true;}for(var eb=0;eb<=w.length;eb++)if(eb==w.length||w[eb].fragile){w.splice(eb,0,{id:bb,signatureID:cb});qa(bb);ga.log('open_tab',{tabs:JSON.stringify(w),opened:bb,window_id:o.getSessionID()});return true;}}function wa(bb){var cb=ra(bb);if(cb!=-1&&(!w[cb].raised||x!==bb)){w[cb].raised=true;x=bb;return true;}return false;}function xa(bb,cb){var db=ra(bb);if(db!=-1&&w[db].fragile){var eb=w[db];eb.fragile=false;eb.server_id=cb;var fb=[];w.forEach(function(gb){if(gb.id!=bb){if(eb&&gb.fragile){fb.push(eb);eb=null;}fb.push(gb);}});if(eb)fb.push(eb);w=fb;ga.log('make_permanent',{tabs:JSON.stringify(w),tab_id:bb,window_id:o.getSessionID()});return true;}return false;}function ya(bb){var cb=ra(bb);if(bb==x)x=null;if(cb!=-1){w.splice(cb,1);ga.log('close_tab',{tabs:JSON.stringify(w),closed:bb,window_id:o.getSessionID()});return true;}return false;}n.registerStateStorer(ja);n.registerStateLoader(function(bb){if(ka(bb))oa();});function za(){}r(za,h,{isTabPromoted:function(bb){if(bb)return bb==x;return false;},indexOf:function(bb){return ra(bb);},getTab:function(bb){l.isThreadID(bb);var cb=this.indexOf(bb);if(cb>-1){var db=w[cb];return r({},db);}return null;},getEmptyTab:function(){var bb;for(var cb=0;cb<w.length;cb++){bb=w[cb].id;if(u.isNewEmptyLocalThread(bb))return bb;}bb='root:'+t.generateNewClientMessageID(Date.now());u.createNewLocalThread(bb,[]);return bb;},getServerTime:function(){return ba();},changeShowingTabs:function(bb){return ua(bb);},closeAllTabs:function(){if(w.length){ga.log('close_all_tabs',{closed_tabs:JSON.stringify(w),window_id:o.getSessionID()});w=[];x=null;if(z)z={};pa();oa();}},closeFragileTabs:function(){var bb=[];for(var cb=0;cb<w.length;cb++)if(w[cb].fragile&&!u.isNewEmptyLocalThread(w[cb].id)){bb.push(w[cb]);w.splice(cb);oa();break;}ga.log('close_fragile_tabs',{tabs:JSON.stringify(w),fragile_closed:bb,window_id:o.getSessionID()});},closeTab:function(bb,cb){l.isThreadID(bb);var db=false;if(z){delete z[bb];db=true;}na(function(){if(ya(bb))db=true;return db;},undefined,cb);},raiseTab:function(bb,cb,db){l.isThreadID(bb);var eb=false;if(z&&cb){z[bb]=true;eb=true;}if(!cb&&bb===y){eb&&oa();return;}na(function(){if(sa(bb,db))eb=true;var fb=ra(bb);if(fb!=-1&&!w[fb].raised){w[fb].raised=true;eb=true;ga.log('raise_tab',{tabs:JSON.stringify(w),raised:bb,window_id:o.getSessionID()});}return eb;});},get:function(){var bb=w.map(function(cb){var db=r({},cb);delete db.fragile;if(z)db.raised=z[db.id];return db;});return {tabs:bb,promoted:x};},openFragileTab:function(bb){l.isThreadID(bb);if(ta(bb))oa();},openTab:function(bb){l.isThreadID(bb);na(sa.bind(null,bb));},lowerTab:function(bb){l.isThreadID(bb);var cb=false;if(z){delete z[bb];cb=true;}na(function(){var db=ra(bb);if(db!=-1&&w[db].raised){delete w[db].raised;ga.log('lower_tab',{tabs:JSON.stringify(w),lowered:bb,window_id:o.getSessionID()});cb=true;}return cb;});},raiseAndPromoteTab:function(bb,cb,db,eb,fb){l.isThreadID(bb);var gb=false;if(z&&cb){z[bb]=true;gb=true;}if(!cb&&bb===y){gb&&oa();return;}na(function(){if(sa(bb,db))gb=true;if(wa(bb)){gb=true;ga.log('raise_and_promote_tab',{tabs:JSON.stringify(w),promoted:bb,window_id:o.getSessionID()});}return gb;},eb,fb);},setPromotedTab:function(bb){l.isThreadID(bb);na(wa.bind(null,bb));},promoteThreadInPlaceOfThread:function(bb,cb,db,eb){l.isThreadID(bb);l.isThreadID(cb);na(function(){var fb=ra(bb),gb=ra(cb);if(eb){x=bb;}else if(x===cb)return true;var hb=w[fb];if(db){l.isThreadID(db);var ib=ra(db),jb=w[gb];w[gb]=hb;w.splice(fb,1);w.splice(ib,0,jb);}else{w[fb]=w[gb];w[gb]=hb;}return true;});},squelchTab:function(bb){l.isThreadID(bb);y=bb;this.lowerTab(bb);ga.log('squelch_tab',{squelched:bb,tabs:JSON.stringify(w),window_id:o.getSessionID()});},clearSquelchedTab:function(){if(y)ga.log('unsquelch_tab',{squelched:y,tabs:JSON.stringify(w),window_id:o.getSessionID()});y=null;},persistLocalRaised:function(){if(z){na(function(){var bb=false;w.forEach(function(cb){if(cb.raised!=z[cb.id]){bb=true;if(z[cb.id]){cb.raised=true;}else delete cb.raised;}});return bb;});ga.log('persist_local_raise',{tabs:JSON.stringify(w),window_id:o.getSessionID()});}}});g.subscribe(k.DUMP_EVENT,function(bb,cb){cb.chat_tabs={promoted:x,tabs:w.map(function(db){return r({},db);}),time:ea,max_load_age:ca};});function ab(){var bb=i.ignoresRemoteTabRaise();if(bb&&!z){ga.log('start_ignore_remote_raise');z={};oa();}else if(!bb&&z){ga.log('stop_ignore_remote_raise');z=null;oa();}}i.subscribe(i.ON_CHANGED,ab);ab();ka(n.getInitial(),true);if(ea===0)ea=ba()-600000;ha=true;e.exports=za;});
__d("Sound",["SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent"],function(a,b,c,d,e,f,g,h,i,j,k){var l=null,m={init:function(q){if(!l)g.init(q);},play:function(q,r,s){if(l){h.playRemote(l.contentWindow,q,r,false);}else h.playLocal(q,r,s);},stop:function(q){if(!l)g.stop(q);}},n=new j(location.href);if(n.getSubdomain()&&n.getSubdomain()!=='www')n.setSubdomain('www');var o=n.getDomain();function p(){if(k.ie()<9)return false;return i.isSupported()&&h.supportsRPC();}if(n.isFacebookURI()&&location.host!==o&&p()){l=document.createElement('iframe');l.setAttribute('src','//'+o+'/sound_iframe.php');l.style.display='none';document.body.appendChild(l);}e.exports=m;});
__d("DOMWrapper",[],function(a,b,c,d,e,f){var g,h,i={setRoot:function(j){g=j;},getRoot:function(){return g||document.body;},setWindow:function(j){h=j;},getWindow:function(){return h||self;}};e.exports=i;});
__d("Flash",["DOMEventListener","DOMWrapper","QueryString","UserAgent","copyProperties","guid","htmlSpecialChars"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={},o,p=h.getWindow().document;function q(v){var w=p.getElementById(v);if(w)w.parentNode.removeChild(w);delete n[v];}function r(){for(var v in n)if(n.hasOwnProperty(v))q(v);}function s(v){return v.replace(/\d+/g,function(w){return '000'.substring(w.length)+w;});}function t(v){if(!o){if(j.ie()>=9)g.add(window,'unload',r);o=true;}n[v]=v;}var u={embed:function(v,w,x,y){var z=l();v=m(v).replace(/&amp;/g,'&');x=k({allowscriptaccess:'always',flashvars:y,movie:v},x||{});if(typeof x.flashvars=='object')x.flashvars=i.encode(x.flashvars);var aa=[];for(var ba in x)if(x.hasOwnProperty(ba)&&x[ba])aa.push('<param name="'+m(ba)+'" value="'+m(x[ba])+'">');var ca=w.appendChild(p.createElement('span')),da='<object '+(j.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+v+'" '+(x.height?'height="'+x.height+'" ':'')+(x.width?'width="'+x.width+'" ':'')+'id="'+z+'">'+aa.join('')+'</object>';ca.innerHTML=da;var ea=ca.firstChild;t(z);return ea;},remove:q,getVersion:function(){var v='Shockwave Flash',w='application/x-shockwave-flash',x='ShockwaveFlash.ShockwaveFlash',y;if(navigator.plugins&&typeof navigator.plugins[v]=='object'){var z=navigator.plugins[v].description;if(z&&navigator.mimeTypes&&navigator.mimeTypes[w]&&navigator.mimeTypes[w].enabledPlugin)y=z.match(/\d+/g);}if(!y)try{y=(new ActiveXObject(x)).GetVariable('$version').match(/(\d+),(\d+),(\d+),(\d+)/);y=Array.prototype.slice.call(y,1);}catch(aa){}return y;},checkMinVersion:function(v){var w=u.getVersion();if(!w)return false;return s(w.join('.'))>=s(v);},isAvailable:function(){return !!u.getVersion();}};e.exports=u;});
__d("SpotlightViewerClose",["React","ReactPropTypes","TooltipLink.react","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.createClass({displayName:'SpotlightViewerClose',props:{position:h.oneOf(['left','right'])},getDefaultProps:function(){return {position:'right'};},render:function(){var n=(this.props.position=='left')?"_5wx3":"_5wx4",o=g.DOM.span(null,"Press Esc to close");return (i({className:l("_4-o9 _50-m _51an",n),onClick:this.props.onClick,tooltip:o}));}});e.exports=m;});
__d("PhotoUtils",["Event","URI"],function(a,b,c,d,e,f,g,h){var i={getImagesFromData:function(j){var k=[];for(var l in j)if(l.indexOf('image')===0)k.push(j[l]);return k;},getFBIDFromData:function(j){return j&&j.id;},getOriginalImageFromData:function(j){return j.original||j.download_image;},getDownloadURLFromData:function(j){var k=this.getOriginalImageFromData(j);if(!k)return null;var l=new h(k.uri);l.addQueryData({dl:1});return l;},getPermalinkFromData:function(j){return j.permalink;},canViewerMakeCoverPhoto:function(j){return !!j.can_viewer_make_cover_photo;},getCoverPhotoURLFromData:function(j){return new h('/profile.php').addQueryData({preview_cover:i.getFBIDFromData(j)});},preload:function(j,k,l){var m=j.getDimensions();for(var n=0;n<k.length;++n){var o=m.getBestFitImageFromPhoto(k[n],m.getMaxStageDimensions()),p=new Image();l&&g.listen(p,'load',l.bind(null,k[n]));j.getLogger().log(o.uri);p.src=o.uri;}}};e.exports=i;});
__d("PhotoViewerDimensions",["Event","PhotoUtils","Vector","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){var k={verticalPadding:'number',horizontalPadding:'number',normalResDim:'object'};function l(m){"use strict";for(var n in m){if(!k[n])throw new Error("Unsupported extraData value '"+n+"' should not be used");if(typeof m[n]===k[n])this['_'+n]=m[n];}this._listener=g.listen(window,'resize',this._resetMaxStageDimensions.bind(this));}l.prototype.destroy=function(){"use strict";this._listener.remove();};l.prototype.getStageDimensions=function(m){"use strict";var n=this.getMaxStageDimensions(),o=new i(Math.min(m.x,n.x),Math.min(m.y,n.y)),p=o.x/o.y,q=m.x/m.y;if(p<q){o.y=Math.round(o.x/q);}else o.x=Math.round(o.y*q);return o;};l.prototype.getImageDimensionsForStage=function(m,n){"use strict";var o=m.x,p=m.y,q=n.x,r=n.y;if(o>=q||p>=r){var s=o/p,t=q/r;if(t<s){o=q;p=Math.round(q/s);}else if(t>s){o=Math.round(r*s);p=r;}else{o=q;p=r;}}return new i(o,p);};l.prototype.getMaxStageDimensions=function(){"use strict";if(!this._maxStageDimensions)this._maxStageDimensions=new i(i.getViewportDimensions().x-this._horizontalPadding,i.getViewportDimensions().y-this._verticalPadding);return this._maxStageDimensions;};l.prototype._resetMaxStageDimensions=function(){"use strict";this._maxStageDimensions=null;};l.prototype.getBestFitImageFromPhoto=function(m,n){"use strict";var o=null,p=h.getImagesFromData(m);p=p.sort(function(r,s){return s.width-r.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)n=new i(n.x*window.devicePixelRatio,n.y*window.devicePixelRatio);for(var q=0;q<p.length;q++)if(!o||p[q].width>=n.x||p[q].height>=n.y)o=p[q];return o;};l.prototype.getOriginalDimensionsFromPhoto=function(m){"use strict";var n=h.getOriginalImageFromData(m);return new i(n.width,n.height);};l.prototype.getBestFitDimensionsFromPhoto=function(m,n){"use strict";var o=this.getBestFitImageFromPhoto(m,n);return new i(o.width,o.height);};l.prototype.getVerticalPadding=function(){"use strict";return this._verticalPadding;};l.prototype.getHorizontalPadding=function(){"use strict";return this._horizontalPadding;};j(l.prototype,{_verticalPadding:40,_horizontalPadding:60,_normalResDim:{x:960,y:960}});e.exports=l;});
__d("SpotlightViewerPageWithKeys",["KeyEventController","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this.$SpotlightViewerPageWithKeys0=j;}i.prototype.enable=function(){"use strict";this.$SpotlightViewerPageWithKeys1=new h();this.$SpotlightViewerPageWithKeys1.addSubscriptions(g.registerKey('LEFT',function(){this.$SpotlightViewerPageWithKeys0.viewState.backward();return false;}.bind(this)),g.registerKey('RIGHT',function(){this.$SpotlightViewerPageWithKeys0.viewState.forward();return false;}.bind(this)));};i.prototype.disable=function(){"use strict";this.$SpotlightViewerPageWithKeys1.release();delete this.$SpotlightViewerPageWithKeys1;};e.exports=i;});
__d("SpotlightViewerUnmountOnClose",[],function(a,b,c,d,e,f){function g(h){"use strict";this.$SpotlightViewerUnmountOnClose0=h;}g.prototype.enable=function(){"use strict";this.$SpotlightViewerUnmountOnClose1=this.$SpotlightViewerUnmountOnClose0.subscribeOnce('close',this.$SpotlightViewerUnmountOnClose0.unmountComponent.bind(this.$SpotlightViewerUnmountOnClose0));};g.prototype.disable=function(){"use strict";this.$SpotlightViewerUnmountOnClose1&&this.$SpotlightViewerUnmountOnClose1.unsubscribe();delete this.$SpotlightViewerUnmountOnClose1;};e.exports=g;});
__d("SpotlightViewport",["Locale","Parent","React","ReactPropTypes","Vector","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=i.createClass({displayName:'SpotlightViewport',propTypes:{stageDimensions:j.object.isRequired},PAGE_TO_PREV_PERCENTAGE:.2,sections:{NONE:null,FORWARD:1,BACKWARD:2},getInitialState:function(){return {currentActiveSection:this.sections.NONE,active:true};},_onMouseMove:function(event){var o=k.getEventPosition(event.nativeEvent),p=k.getElementPosition(this.getDOMNode()),q,r=o.x-p.x,s=r/this.props.stageDimensions.x;if(g.isRTL()){q=s>(1-this.PAGE_TO_PREV_PERCENTAGE);}else q=s<this.PAGE_TO_PREV_PERCENTAGE;if(q){this.setState({currentActiveSection:this.sections.BACKWARD});}else this.setState({currentActiveSection:this.sections.FORWARD});},_onClick:function(event){var o=this.state.currentActiveSection==this.sections.FORWARD,p=event.target;if(!h.byClass(p,"_51an"))this.props.onClick&&this.props.onClick(o);},_onMouseEnter:function(){this.setState({active:true});},_onMouseLeave:function(){this.setState({active:false});},render:function(){var o=(("_4-of")+(!this.state.active&&!this.props.active?' '+"_50-l":'')+(this.state.currentActiveSection===this.sections.BACKWARD?' '+"_516a":'')+(this.state.currentActiveSection===this.sections.FORWARD?' '+"_516b":'')+(this.props.showLoadingIndicator?' '+"_51jp":''));if(this.props.className)o=m(o,this.props.className);return (i.DOM.div({className:o,style:{width:this.props.stageDimensions&&this.props.stageDimensions.x,height:this.props.stageDimensions&&this.props.stageDimensions.y},onClick:this._onClick,onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.props.children,i.DOM.div({className:"_4-og"},i.DOM.span({className:"_4-oh"}),this.props.media,i.DOM.div({className:"_4-oi"}))));}});e.exports=n;});
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","CurrentUser","DataStore","DOMQuery","Event","Form","JSONPTransport","Parent","URI","copyProperties","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(ca){var da={},ea=n.scry(ca,'input[type="file"]');ea.forEach(function(fa){da[fa.name]=fa.files;});return da;}function x(ca){var da=n.scry(ca,'input[type="file"]');da.forEach(function(ea){ea.files=null;});}var y=u(g,k);for(var z in y)if(y.hasOwnProperty(z))ba[z]=y[z];var aa=y===null?null:y.prototype;ba.prototype=Object.create(aa);ba.prototype.constructor=ba;ba.__superConstructor__=y;function ba(ca,da,ea){"use strict";if(ca.getAttribute('rel')==='async')throw new Error('FileForm cannot be used with Primer forms.');if(ca.getAttribute('method').toUpperCase()!=='POST')throw new Error('FileForm must be used with POST forms.');this._form=ca;this._previousEncoding=this._form.enctype;this._form.enctype=this._form.encoding='multipart/form-data';this._files=null;da&&this.enableBehaviors(da);this._options=ea||{};this.setAllowCrossOrigin(this._options.allowCrossOrigin);this.setUploadInParallel(this._options.uploadInParallel);this.setPreprocessHandler(this._options.preprocessHandler);this.setNetworkErrorRetryLimit(this._options.networkErrorRetryLimit);this._listeners=[o.listen(this._form,'submit',this._submit.bind(this)),o.listen(this._form,'click',this._click.bind(this))];m.set(this._form,'FileForm',this);}ba.prototype.getRoot=function(){"use strict";return this._form;};ba.prototype.setAllowCrossOrigin=function(ca){"use strict";this._allowCrossOrigin=!!ca;return this;};ba.prototype.setUploadInParallel=function(ca){"use strict";this._uploadInParallel=!!ca;return this;};ba.prototype.setPreprocessHandler=function(ca){"use strict";this._preprocessHandler=ca;return this;};ba.prototype.setNetworkErrorRetryLimit=function(ca){"use strict";this._retryLimit=ca;return this;};ba.prototype.setFiles=function(ca){"use strict";this._files=ca;return this;};ba.prototype._submit=function(event){"use strict";if(this.inform('submit')===false){event.prevent();return;}var ca='FormData' in window;if(ca)if(!s(this._form.action).isSameOrigin()&&!this._allowCrossOrigin)ca=false;return ca?this._sendViaXHR(event):this._sendViaFrame(event);};ba.prototype._click=function(event){"use strict";var ca=event.getTarget();while(n.isElementNode(ca)){if(ca.type==='submit'){this._clickTarget=ca;setTimeout(this._unclick.bind(this),0);break;}ca=ca.parentNode;}};ba.prototype._unclick=function(){"use strict";this._clickTarget=null;};ba.prototype._sendViaFrame=function(event){"use strict";var ca=this._request=new h();ca.setStatusElement(this._getStatusElement());ca.addStatusIndicator();ca.setOption('useIframeTransport',true);var da=ca.handleResponse.bind(ca),ea=new q('iframe',this._form.action,da),fa=ea.getTransportFrame(),ga=ea.getRequestURI().addQueryData({__iframe:true,__user:l.getID()});this._form.setAttribute('action',ga.toString());this._form.setAttribute('target',fa.name);ca.setJSONPTransport(ea);ca.setURI(ga);ca.setHandler(this.success.bind(this,null));ca.setErrorHandler(this.failure.bind(this,null));ca.setInitialHandler(v(this.initial,this,null));};ba.prototype._sendViaXHR=function(event){"use strict";var ca;if(this._uploadInParallel&&j.isSupported()){ca=new j().setPreprocessHandler(this._preprocessHandler).setData(p.serialize(this._form,this._clickTarget));ca.setNetworkErrorRetryLimit(this._retryLimit);if(this._files){ca.setFiles(this._files);}else ca.setFiles(w(this._form));var da=[ca.subscribe('progress',function(ea,fa){this.progress(fa,fa.getProgressEvent());}.bind(this)),ca.subscribe('initial',function(ea,fa){this.initial(fa,fa.getResponse());}.bind(this)),ca.subscribe('success',function(ea,fa){this.success(fa,fa.getResponse());}.bind(this)),ca.subscribe('start',function(ea,fa){this.inform('start',{upload:fa});}.bind(this)),ca.subscribe('failure',function(ea,fa){this.failure(fa,fa.getResponse());return false;}.bind(this)),ca.subscribe('complete',function(){while(da.length)da.pop().unsubscribe();})];}else ca=new h().setRawData(p.createFormData(this._form,this._clickTarget)).setHandler(this.success.bind(this,null)).setErrorHandler(this.failure.bind(this,null)).setUploadProgressHandler(this.progress.bind(this,null)).setInitialHandler(v(this.initial,this,null));ca.setAllowCrossOrigin(this._allowCrossOrigin).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=ca;event.prevent();};ba.prototype.initial=function(ca){"use strict";return this.inform('initial',{upload:ca});};ba.prototype.success=function(ca,da){"use strict";var ea={response:da,upload:ca};if(this.inform('success',ea)!==false)o.fire(this._form,'success',ea);this._cleanup();};ba.prototype.failure=function(ca,da){"use strict";var ea={response:da,upload:ca};if(this.inform('failure',ea)!==false)if(o.fire(this._form,'error',ea)!==false)i.defaultErrorHandler(da);this._cleanup();};ba.prototype.progress=function(ca,event){"use strict";this.inform('progress',{event:event,upload:ca});};ba.prototype.abort=function(){"use strict";if(this._request){this._request.abort();this._cleanup();}};ba.prototype.clear=function(){"use strict";x(this._form);};ba.prototype.destroy=function(){"use strict";this._cleanup();while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;m.remove(this._form,'FileForm');};ba.prototype._cleanup=function(){"use strict";this._request=null;};ba.prototype._getStatusElement=function(){"use strict";return r.byClass(this._form,'stat_elem')||this._form;};ba.getInstance=function(ca){"use strict";return m.get(ca,'FileForm');};t(ba,{EVENTS:['start','submit','initial','progress','success','failure']});e.exports=ba;});
__d("submitForm",["DOM"],function(a,b,c,d,e,f,g){var h=function(i){var j=g.scry(i,'input[type="submit"]')[0];if(j){j.click();}else{j=g.create('input',{type:'submit',className:'hidden_elem'});g.appendContent(i,j);j.click();g.remove(j);}};e.exports=h;});
__d("WebWorker",["BanzaiLogger","WebWorkerConfig","BlobFactory","Event","URI","Run","SubscriptionsHandler","XHRRequest","arrayContains","emptyFunction","getCrossOriginTransport","performanceNow","invariant","memoize","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=a.URL||a.webkitURL;function w(aa){"use strict";this.$WebWorker0=false;this.$WebWorker1=null;this.$WebWorker2('constructed');this.$WebWorker3=aa;this.$WebWorker4=null;this.$WebWorker5=p;this.$WebWorker6=p;this.$WebWorker7=[];this.$WebWorker8=false;this.$WebWorker9=new m();l.onLeave(function(){if(!this.$WebWorker8)this.terminate();}.bind(this));}w.prototype.setMessageHandler=function(aa){"use strict";this.$WebWorker5=aa||p;return this;};w.prototype.setErrorHandler=function(aa){"use strict";this.$WebWorker6=aa||p;return this;};w.prototype.postMessage=function(aa,ba){"use strict";s(!this.isCurrentState('constructed'));s(!this.isCurrentState('terminated'));if(this.isCurrentState('preparing')){this.$WebWorker7.push(this.postMessage.bind(this,aa,ba));return this;}var ca={type:'message',message:aa};if(ba){this.$WebWorker4.postMessage(ca,ba);}else this.$WebWorker4.postMessage(ca);return this;};w.prototype.terminate=function(){"use strict";if(this.isCurrentState('executing'))this.$WebWorker4.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker2('terminated');this.$WebWorker4=null;this.$WebWorkera();this.$WebWorker7=[];}return this;};w.prototype.execute=function(){"use strict";s(!this.isCurrentState('terminated'));if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker2('preparing');w.prepareResource(this.$WebWorker3,this.$WebWorkerb.bind(this));return this;};w.prototype.setAllowCrossPageTransition=function(aa){"use strict";this.$WebWorker8=aa;return this;};w.prototype.isCurrentState=function(aa){"use strict";s(o(w.states,aa));return aa===this.$WebWorker1;};w.prototype.$WebWorkerb=function(){"use strict";s(!this.isCurrentState('executing'));if(this.isCurrentState('terminated'))return;s(this.$WebWorker3.sameOriginURL||this.$WebWorker3.source);if(this.$WebWorker3.sameOriginURL){this.$WebWorker4=new a.Worker(this.$WebWorker3.sameOriginURL);}else{this.$WebWorker4=new a.Worker(w.evalWorkerURL);this.$WebWorker4.postMessage(this.$WebWorker3.source);}this.$WebWorkerc('ping',Date.now());this.$WebWorkerd();this.$WebWorker2('executing');this.$WebWorker7.forEach(function(aa){return aa();});this.$WebWorker7=null;};w.prototype.$WebWorkera=function(){"use strict";this.$WebWorker9.release();};w.prototype.$WebWorkerc=function(aa){"use strict";var ba=Array.prototype.slice.call(arguments,1);this.$WebWorker4.postMessage({type:aa,args:ba});};w.prototype.$WebWorkere=function(event,aa){"use strict";w.$WebWorkere(event,this.$WebWorker3.name,aa);};w.prototype.$WebWorkerd=function(){"use strict";this.$WebWorker9.addSubscriptions(j.listen(this.$WebWorker4,'message',this.$WebWorkerf.bind(this)),j.listen(this.$WebWorker4,'error',this.$WebWorkerg.bind(this)));};w.prototype.$WebWorkerg=function(aa){"use strict";var ba=this.$WebWorker6(aa);if(!ba&&!aa.defaultPrevented)this.$WebWorkere('exception',{message:aa.message});};w.prototype.$WebWorkerf=function(event){"use strict";var aa=event.data;switch(aa.type){case 'message':this.$WebWorker5(aa.message);break;case 'pong':this.$WebWorker0=true;this.$WebWorkere('executed',{dt:Math.floor(aa.args[1]-aa.args[0]),bytes:this.$WebWorker3.source.length});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();break;case 'console':var ba=aa.args.shift();s(o(['log','error','info','debug','warn'],ba));a.console[ba].apply(a.console,aa.args);break;}};w.prototype.$WebWorker2=function(aa){"use strict";s(o(w.states,aa));this.$WebWorker1=aa;};w.prepareResource=function(aa,ba){"use strict";ba=ba||p;s(aa.sameOriginURL||aa.url||aa.source);if(aa.sameOriginURL){ba();}else if(aa.url&&k(aa.url).isSameOrigin()){aa.sameOriginURL=aa.url;ba();}else if(aa.source){if(w.$WebWorkerh())aa.sameOriginURL=w.$WebWorkeri(aa.source);ba();}else if(!aa.loading){var ca=r();aa.loading=[ba];w.$WebWorkerj(aa.url,function(da){if(da){aa.source=da;if(w.$WebWorkerh())aa.sameOriginURL=w.$WebWorkeri(da);}w.$WebWorkere('prepared',aa.name,{dt:Math.floor(r()-ca),bytes:da.length});aa.loading.forEach(function(ea){return ea();});aa.loading=false;});}else aa.loading.push(ba);return aa;};w.releaseResource=function(aa){"use strict";if(aa.sameOriginURL.indexOf('blob:')===0){v.revokeObjectURL(aa.sameOriginURL);aa.sameOriginURL=null;}return aa;};w.isSupported=function(){"use strict";return !!a.Worker;};w.areTransferablesSupported=function(){"use strict";return w.isSupported()&&z();};w.$WebWorkerj=function(aa,ba){"use strict";new n(aa).setTransportBuilder(q).setMethod('GET').setResponseHandler(function(ca){ba(ca);}).setErrorHandler(ba.bind(null,null)).send();};w.$WebWorkeri=function(aa){"use strict";s(w.$WebWorkerh());if(w.$WebWorkerk()){var ba=i.getBlob([aa]);return v.createObjectURL(ba);}if(w.$WebWorkerl())return 'data:application/javascript,'+encodeURIComponent(aa);};w.$WebWorkerk=function(){"use strict";return i.isSupported()&&!!v&&!!v.createObjectURL&&x();};w.$WebWorkerl=function(){"use strict";return y();};w.$WebWorkerh=function(){"use strict";return w.$WebWorkerk()||w.$WebWorkerl();};w.$WebWorkere=function(event,aa,ba){"use strict";if(!h.logging.enabled)return;g.log(h.logging.config,u(ba,{event:event,resource:aa}));};var x=t(function(){var aa,ba;try{aa=v.createObjectURL(i.getBlob(['']));var da=new a.Worker(aa);da.terminate();ba=true;}catch(ca){ba=false;}finally{v.revokeObjectURL(aa);}return ba;}),y=t(function(){var aa;try{var ca=new a.Worker('data:application/javascript,');ca.terminate();aa=true;}catch(ba){aa=false;}return aa;}),z=t(function(){var aa;try{var ca=new a.Worker(w.evalWorkerURL),da=new ArrayBuffer(0);ca.postMessage({buffer:da},[da]);ca.terminate();aa=true;}catch(ba){aa=false;}return aa;});w.states=['constructed','preparing','executing','terminated'];w.evalWorkerURL=h.evalWorkerURL;e.exports=w;});
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='scraperLastPermissiveMatch',n=l(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r){"use strict";this.input=r;this.enable();}q.prototype.reset=function(){"use strict";h.set(this.input,m,null);};q.prototype.enable=function(){"use strict";if(this.events)return;var r=function(s){setTimeout(this.check.bind(this,s),30);};this.events=i.listen(this.input,{paste:r.bind(this,false),keydown:r.bind(this,true)});};q.prototype.disable=function(){"use strict";if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;};q.prototype.check=function(r){"use strict";var s=this.input.value;if(r&&q.trigger(s))return;var t=q.match(s),u=j.permissiveMatch(s);if(u&&(u!=h.get(this.input,m))){h.set(this.input,m,u);this.inform('match',{url:t||u,alt_url:u});}};k(q,j);e.exports=q;});
__d("FileFormResetOnSubmit",["DOMQuery","Event","emptyFunction"],function(a,b,c,d,e,f,g,h,i){function j(l,m){var n=h.listen(l,'change',i.thatReturnsFalse,h.Priority.URGENT);try{m();}catch(o){throw o;}finally{n.remove();}}function k(l){"use strict";this._form=l;}k.prototype.enable=function(){"use strict";var l=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(l,0);});};k.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null;};k.prototype._reset=function(){"use strict";var l=this._form.getRoot();j(l,function(){var m=g.scry(l,'input[type="file"]');m.forEach(function(n){n.value='';});});};e.exports=k;});
__d("FormSubmitOnChange",["Event","copyProperties","submitForm"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this._form=k;}j.prototype.enable=function(){"use strict";this._listener=g.listen(this._form.getRoot(),'change',this._submit.bind(this));};j.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null;};j.prototype._submit=function(){"use strict";i(this._form.getRoot());};h(j.prototype,{_listener:null});e.exports=j;});
__d("ChatAddFriendsTabSheet",["ArbiterMixin","ChatAddFriendsTabSheetRawRenderer","ChatOpenTab","MercuryLogMessageType","MercurySourceType","MultiChatController","Style","copyProperties","MercuryMessages","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=b('MercuryMessages').get(),p=b('MercuryThreads').get();function q(t,u,v){this._threadID=t;this._rootElement=u;this._sheetView=v;this._typeahead=null;}n(q.prototype,g,{render:function(){p.getThreadMeta(this._threadID,function(t){var u=t.is_canonical_user?r:s;this._typeahead=h.render(this,this._sheetView,this._rootElement,t,u.bind(null,t),p.isNewEmptyLocalThread(this._threadID));this._typeahead.subscribe('tokens-changed',function(){this.inform('chat/tokens-changed',{token_count:this._typeahead.getTokens().length});}.bind(this));this._typeahead.subscribe('resize',function(){this._sheetView.resize();}.bind(this));}.bind(this));},getParticipants:function(){if(!this._typeahead)return null;return this._typeahead.getSelectedParticipantIDs();},isPermanent:function(){return true;},getType:function(){return 'add_friends_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},getHeight:function(){return m.get(this._rootElement,'height');}});function r(t,u){var v=t.participants;l.createThreadForTokens(v.concat(u));}function s(t,u){var v=t.thread_id;if(p.isEmptyLocalThread(v)){p.addParticipantsToThreadLocally(v,u);}else o.sendMessage(o.constructLogMessageObject(k.CHAT_WEB,v,j.SUBSCRIBE,{added_participants:u}));i.openThread(v,'ChatAddFriendsTabSheet');}e.exports=q;});
__d("ChatOfflineTabSheet",["ChatPrivacyActionController","ChatVisibility","CSS","DOM","Event","JSLogger","MercuryParticipants","ChatTabTemplates","copyProperties","cx","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=b('MercuryThreads').get();function r(s,t,u){this._rootElement=t;this._sheetView=u;this._logger=l.create('blackbird');this._canonicalUser=q.getCanonicalUserInThread(s);if(this._canonicalUser)this._privacyActionController=new g(this._canonicalUser,this._handlePrivacyChange.bind(this));}o(r.prototype,{render:function(){if(!this._canonicalUser){this._logger.error('offline_sheet_open_with_non_friend');return;}var s=n[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build(),t='fbid:'+this._canonicalUser;m.get(t,function(u){var v='fbChatGoOnlineLink',w=j.tx._("turn on chat"),x=j.create('a',{href:'#',className:v},w),y=j.tx._("To chat with {name} and other friends, {link}.",{name:u.short_name,link:x});j.setContent(s.getNode('text'),y);i.addClass(s.getRoot(),"_1sk1");j.setContent(this._rootElement,s.getRoot());k.listen(this._rootElement,'click',function(event){if(i.hasClass(event.getTarget(),v)){if(h.isOnline())this._logger.error('tab_sheet_already_online');this._privacyActionController.togglePrivacy();this._logger.log('tab_sheet_go_online',{tab_id:this._canonicalUser});return false;}}.bind(this));this._sheetView.resize();}.bind(this));},_handlePrivacyChange:function(s){if(!this._canonicalUser)this._logger.error('user_blocked_sheet_privacy_changed_non_friend');switch(s){case g.OFFLINE:this._sheetView.open(this);break;case g.NORMAL:case g.BLOCKED:this._sheetView.close(this);break;}},isPermanent:function(){return true;},getType:function(){return 'offline_type';},destroy:function(){this._privacyActionController&&this._privacyActionController.destroy();}});e.exports=r;});
__d("WebAsyncSearchSource",["AbstractSearchSource","AsyncRequest","SearchSourceCallbackManager","SearchableEntry","TokenizeUtil","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){for(var n in g)if(g.hasOwnProperty(n))p[n]=g[n];var o=g===null?null:g.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=g;function p(q){"use strict";this.$WebAsyncSearchSource0=q.bootstrapRequests;this.$WebAsyncSearchSource1=q.queryRequests;this.$WebAsyncSearchSource2=q.auxiliaryFields;this.$WebAsyncSearchSource3=q.asyncErrorHandler||m;this.$WebAsyncSearchSource4=q.packageFn||this.$WebAsyncSearchSource5;this.$WebAsyncSearchSource6=q.getAllForEmptyQuery;this.$WebAsyncSearchSource7=[];this.$WebAsyncSearchSource8=new i({parseFn:k.parse,matchFn:k.isQueryMatch,indexFn:q.indexFn});}p.prototype.bootstrapImpl=function(q){"use strict";if(!this.$WebAsyncSearchSource0||!this.$WebAsyncSearchSource0.length){q();return;}var r=this.$WebAsyncSearchSource0.length,s=0;this.$WebAsyncSearchSource0.forEach(function(t){this.$WebAsyncSearchSource9({},t,function(u){var v=this.$WebAsyncSearchSourcea(u);this.$WebAsyncSearchSource8.addLocalEntries(v);this.$WebAsyncSearchSource7=this.$WebAsyncSearchSource7.concat(v);s++;if(s===r){q();q=null;}}.bind(this));}.bind(this));};p.prototype.searchImpl=function(q,r,s){"use strict";if(this.$WebAsyncSearchSource6&&q===''){this.getBootstrappedEntries(function(y){r(y,q);});return;}var t=null,u={},v=this.$WebAsyncSearchSource8.search(q,function(y){if(!t){t=y;t.forEach(function(z){u[z.getUniqueID()]=true;});}else y.forEach(function(z){var aa=z.getUniqueID();if(!u[aa]){t.push(z);u[aa]=true;}});r(t,q);},s);if(!v||!this.$WebAsyncSearchSource1||!this.$WebAsyncSearchSource1.length)return;var w={value:q,existing_ids:t&&t.map(function(y){return y.getUniqueID();}).join(',')},x=this.$WebAsyncSearchSource1.length;this.$WebAsyncSearchSource1.forEach(function(y){this.$WebAsyncSearchSource9(w,y,function(z){this.$WebAsyncSearchSourceb(z,q);x--;if(!x)this.$WebAsyncSearchSource8.setQueryStringAsExhausted(q);}.bind(this));},this);};p.prototype.getBootstrappedEntries=function(q){"use strict";return this.bootstrap(function(){q(this.$WebAsyncSearchSource7||[]);}.bind(this));};p.prototype.getAllEntriesMap=function(){"use strict";return this.$WebAsyncSearchSource8.getAllEntriesMap();};p.prototype.$WebAsyncSearchSource9=function(q,r,s){"use strict";new h(r.uri).setData(l({},q,r.data)).setMethod('GET').setReadOnly(true).setHandler(s).setErrorHandler(this.$WebAsyncSearchSource3).send();};p.prototype.$WebAsyncSearchSourcea=function(q){"use strict";var r=q.getPayload().entries||q.getPayload()||[];return r.map(this.$WebAsyncSearchSource4.bind(this));};p.prototype.$WebAsyncSearchSourcec=function(q){"use strict";this.$WebAsyncSearchSource8.addLocalEntries(this.$WebAsyncSearchSourcea(q));};p.prototype.$WebAsyncSearchSourceb=function(q,r){"use strict";var s=this.$WebAsyncSearchSourcea(q);if(s.length)this.$WebAsyncSearchSource8.addQueryEntries(s,r);};p.prototype.$WebAsyncSearchSource5=function(q,r){"use strict";return new j({uniqueID:q.uniqueID||q.uid,order:q.index||r,title:q.title||q.text,subtitle:q.subtitle||q.category||q.subtext,keywordString:q.keywordString||q.tokens,type:q.type,photo:q.photo,uri:q.path,auxiliaryData:this.$WebAsyncSearchSourced(q)});};p.prototype.$WebAsyncSearchSourced=function(q){"use strict";var r;if(this.$WebAsyncSearchSource2){r={};for(var s in this.$WebAsyncSearchSource2){var t=this.$WebAsyncSearchSource2[s];r[s]=q[t];}}if(q.aux_data){r=r||{};l(r,q.aux_data);}return r;};e.exports=p;});
__d("TextInputControl",["DOMControl","Event","Input","copyProperties","debounce"],function(a,b,c,d,e,f,g,h,i,j,k){for(var l in g)if(g.hasOwnProperty(l))n[l]=g[l];var m=g===null?null:g.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=g;function n(o){"use strict";g.call(this,o);var p=this.getRoot(),q=k(this.update.bind(this),0);h.listen(p,{input:q,keydown:q,paste:q});}n.prototype.setMaxLength=function(o){"use strict";i.setMaxLength(this.getRoot(),o);return this;};n.prototype.getValue=function(){"use strict";return i.getValue(this.getRoot());};n.prototype.isEmpty=function(){"use strict";return i.isEmpty(this.getRoot());};n.prototype.setValue=function(o){"use strict";i.setValue(this.getRoot(),o);this.update();return this;};n.prototype.clear=function(){"use strict";return this.setValue('');};n.prototype.setPlaceholderText=function(o){"use strict";i.setPlaceholder(this.getRoot(),o);return this;};e.exports=n;});
__d("TextAreaControl",["Arbiter","ArbiterMixin","CSS","DOMControl","Event","Style","TextInputControl","TextMetrics","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(v,w){return l.getFloat(v,w)||0;}var r=o(m,p(h));for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(v){"use strict";this.autogrow=i.hasClass(v,'uiTextareaAutogrow');r.call(this,v);this.width=null;k.listen(v,'focus',this._handleFocus.bind(this));}u.prototype.setAutogrow=function(v){"use strict";this.autogrow=v;return this;};u.prototype.onupdate=function(){"use strict";t.onupdate.call(this);if(this.autogrow){var v=this.getRoot();if(!this.metrics)this.metrics=new n(v);if(typeof this.initialHeight==='undefined'){this.isBorderBox=l.get(v,'box-sizing')==='border-box'||l.get(v,'-moz-box-sizing')==='border-box'||l.get(v,'-webkit-box-sizing')==='border-box';this.borderBoxOffset=q(v,'padding-top')+q(v,'padding-bottom')+q(v,'border-top-width')+q(v,'border-bottom-width');this.initialHeight=v.offsetHeight-this.borderBoxOffset;}var w=this.metrics.measure(),x=Math.max(this.initialHeight,w.height);if(this.isBorderBox)x+=this.borderBoxOffset;if(x!==this.height){this.height=x;l.set(v,'height',x+'px');g.inform('reflow');this.inform('resize');}}else if(this.metrics){this.metrics.destroy();this.metrics=null;}};u.prototype.resetHeight=function(){"use strict";this.height=-1;this.update();};u.prototype._handleFocus=function(){"use strict";this.width=null;};u.getInstance=function(v){"use strict";return j.getInstance(v)||new u(v);};e.exports=u;});
__d("PhotosUploadWaterfall",["AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","randomInt"],function(a,b,c,d,e,f,g,h,i,j){function k(m,n){var o={};m.scuba_ints=m.scuba_ints||{};m.scuba_ints.client_time=Math.round(Date.now()/1000);if(i.retryBanzai){o.retry=true;m.scuba_ints.nonce=j(4294967296);}h.post(i.deprecatedBanzaiRoute,m,o);if(n)setTimeout(n,0);}var l={APP_FLASH:'flash_pro',APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',APP_MESSENGER:'messenger',APP_HTML5:'html5',APP_CHAT:'chat',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,CERROR_RESIZING_FAILED:6,CERROR_MARKER_EXTRACTION_FAILED:9,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,CLIENT_ERROR:7,RECOVERABLE_CLIENT_ERROR:12,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_START:18,SELECT_CANCELED:19,CANCEL:22,CANCEL_DURING_UPLOAD:83,ONE_RESIZING_START:2,ONE_UPLOAD_START:10,ONE_UPLOAD_DONE:29,ONE_RESIZING_DONE:34,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,PUBLISH_START:100,PUBLISH_SUCCESS:101,PUBLISH_FAILURE:102,CLUSTERING_START:103,CLUSTERING_SUCCESS:104,CLUSTERING_FAILURE:105,POST_BUTTON_CLICKED:110,EDITABLE_PHOTO_FETCH_START:106,EDITABLE_PHOTO_FETCH_SUCCESS:107,EDITABLE_PHOTO_FETCH_FAILURE:108,CANCEL_INDIVIDUAL_UPLOAD:109,SESSION_POSTED:72,POST_PUBLISHED:80,ONE_UPLOAD_CANCELED:81,ONE_UPLOAD_CANCELED_DURING_UPLOAD:82,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,FALLBACK_TO_FLASH:13,RETRY_UPLOAD:17,TAGGED_ALL_FACES:14,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,VAULT_SYNCED_PAGED_LINK_CLICKED:84,VAULTBOX:'vaultbox',GRID:'grid',SPOTLIGHT_VAULT_VIEWER:'spotlight_vault_viewer',REF_VAULT_NOTIFICATION:'vault_notification',sendSignal:function(m,n){if(i.useBanzai){k(m,n);}else{var o=new g('/ajax/photos/waterfall.php',{data:JSON.stringify(m)}).setHandler(n);if(i.timeout)o.setTimeout(10*1000);o.send();}}};e.exports=l;});
__d("ChatTabViewCoordinator",["Arbiter","BanzaiODS","Bootloader","ChatTabModel","ChatTabView","ChatTabViewSelector","CSS","JSLogger","Style","Rect","VideoCallCore","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=n.create('chat_tab_coordinator'),t,u;function v(w,x){var y=new l(w),z={},aa={},ba=false;function ca(){var oa=j.get(),pa={};oa.tabs.forEach(function(ra){pa[ra.id]=1;});s.log('process_tab_changed',{model_tabs:Object.keys(pa),view_tabs:Object.keys(z)});for(var qa in z)if(!pa[qa]){s.log('remove_tab',{tab_id:qa});z[qa].destroy();delete(z[qa]);}da(oa);ma(oa);if(oa.tabNeedsFocus&&!oa.tabNeedsFocus.isFocused())oa.tabNeedsFocus.focus();}function da(oa){var pa=null;oa.tabs.forEach(function(qa){var ra=qa.id,sa=false;if(!z[ra]){s.log('add_tab',{tab_id:ra});z[ra]=new k(ra,qa.server_id,qa.signatureID);sa=true;}else z[ra].updateSignatureID(qa.signatureID);if(z[ra].isFocused())oa.tabNeedsFocus=z[ra];if(sa||!z[ra].nextTabIs(pa)){var ta=z[ra].getScrollTop();if(pa){z[ra].insertBefore(pa);}else z[ra].appendTo(w);if(ta)z[ra].setScrollTop(ta);}pa=z[ra];});}function ea(){var oa=x.getShowingTabsOrder();if(!oa||!oa.length)return;var pa=z[oa[0].id]._tabElem,qa=z[oa[oa.length-1].id]._tabElem,ra=parseInt(o.get(qa,'margin-left'),10)||0,sa=p.getElementBounds(qa).l-2*ra;sa=sa>0?sa:0;t&&t.setBoundingBox(new p(0,p.getElementBounds(pa).r,0,sa));}function fa(oa,pa){var qa=false;pa.forEach(function(ta){if(ta.raised){if(aa[ta.id]){qa=true;delete aa[ta.id];}}else if(!aa[ta.id]){qa=true;aa[ta.id]=true;}});if(qa)return true;if(!t)return true;var ra=ga()||[];if(ra.length!==oa.length)return true;for(var sa=0;sa<oa.length;sa++)if(ra[sa]!==oa[sa].id)return true;return false;}function ga(){var oa=t&&t.getOrder();oa&&oa.reverse();return oa;}function ha(){var oa=ga();if(oa){h.bumpEntityKey('chat.web','tab.drag_order_changed');g.inform('chat/tabs-order-changed',oa);}}function ia(oa,pa,qa){if(z[qa]._scrollTop!=null)z[qa].setScrollTop(z[qa]._scrollTop);}function ja(oa,pa){u=pa;z[pa]._isDragDropActive=true;z[pa]._scrollTop=z[pa].getScrollTop();o.set(z[pa]._tabElem,'z-index',1);ea();h.bumpEntityKey('chat.web','tab.drag_started');}function ka(oa){o.set(z[oa]._tabElem,'z-index','');if(z[oa]._scrollTop!=null)z[oa].setScrollTop(z[oa]._scrollTop);z[oa]._scrollTop=null;u=null;setTimeout(function(){z[oa]._isDragDropActive=false;},0);}function la(oa){i.loadModules(["SortableGroup"],function(pa){var qa=x.getShowingTabsOrder(),ra=fa(qa,oa);if(qa.length<=1){t&&t.removeAllSortables();return;}if(ra){if(t){t.removeAllSortables();}else t=new pa().setBeforeGrabCallback(ja).setDragOverCallback(ia).setDropCallback(ka).setOrderChangeHandler(ha).setUseScroller(false).setDragOverHorizontally();for(var sa=0;sa<qa.length;sa++){var ta=qa[sa];t.addSortable(ta.id,z[ta.id]._tabElem,aa[ta.id]?null:z[ta.id]._titlebar);}}});}function ma(oa){var pa=x.getTabsToShow(oa),qa=[],ra=false;oa.tabs.forEach(function(sa){if(!pa[sa.id]){z[sa.id].setVisibleState(false,sa.raised);qa.push(sa);}});oa.tabs.forEach(function(sa){if(pa[sa.id]){z[sa.id].setVisibleState(true,sa.raised);ra|=sa.raised;}});y.setTabData(qa);na(ra);la(oa.tabs);}function na(oa){if(!oa&&ba){g.inform('layer_hidden',{type:'ChatTab'});ba=false;}else if(oa&&!ba){g.inform('layer_shown',{type:'ChatTab'});ba=true;}}if(q.isSupported())m.addClass(w,'videoCallEnabled');x.subscribe('tabs-changed',ca);ca();}r(v.prototype,{forceDrop:function(){if(t&&u){t.forceDrop(u);u=null;return true;}return false;}});e.exports=v;});