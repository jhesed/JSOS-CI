/*!CK:2932753209!*//*1392823021,178174743*/

if (self.CavalryLogger) { CavalryLogger.start_js(["77fMx"]); }

__d("ScrubberMaintainAnchors",[],function(a,b,c,d,e,f){function g(h){"use strict";this.$ScrubberMaintainAnchors0=h;}g.prototype.enable=function(){"use strict";this.$ScrubberMaintainAnchors1=this.$ScrubberMaintainAnchors0.subscribe('scrub',this.$ScrubberMaintainAnchors2.bind(this));};g.prototype.disable=function(){"use strict";this.$ScrubberMaintainAnchors1.unsubscribe();this.$ScrubberMaintainAnchors1=null;};g.prototype.$ScrubberMaintainAnchors2=function(h,i){"use strict";if(i){var j=i.getAttribute('data-target');if(j!=='')history.pushState(null,null,'#'+j);}};e.exports=g;});
__d("Scrubber",["Arbiter","ArbiterMixin","BehaviorsMixin","CSS","DOM","DOMQuery","DOMScroll","Event","Focus","Keys","Parent","ScrollableArea","arrayContains","csx","cx","ge","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=w(h,i);for(var y in x)if(x.hasOwnProperty(y))aa[y]=x[y];var z=x===null?null:x.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=x;function aa(ga,ha,ia,ja){"use strict";this._root=ga;this.update();this._tabbableElement=k.scry(this._root,'a')[0];this._scrollArea=ja;n.listen(ga,'click',this._handleClick.bind(this));n.listen(ga,'keydown',this._moveFocus.bind(this));g.subscribe('Scrubber/newContent',this.update.bind(this));ia&&this.enableBehaviors(ia);this.select(ha);}aa.prototype.update=function(){"use strict";this._targets=[];l.scry(this._root,"li._ga").forEach(function(ga){var ha=aa.getTarget(ga);if(ha)this._targets.push({item:ga,node:ha});}.bind(this));this.inform('update');};aa.prototype.select=function(ga){"use strict";ga=fa(ga);if(ga===this._selected)return;if(!this.isScrubbing()||this._isScrubbingTo(ga))if(this.inform('select',ga)===false)return;var ha=ea(ga),ia=-1;if(this._selected){var ja=ea(this._selected);for(var ka=ja.length-1;ka>=0;ka--){if(s(ha,ja[ka])){ia=ka;break;}this._setSelected(ja[ka],false);}if(ia<0)this.inform('roll',ja[0]);this._selected=null;}if(ga){for(var la=ia+1;la<ha.length;la++)this._setSelected(ha[la],true);if(ia<0)this.inform('unroll',ha[0]);this._selected=ga;}};aa.prototype.scrollTo=function(ga,ha,ia){"use strict";if(this._scrollArea){this.getScrollAreaJS().scrollElemToTop(ga,ha,ia);}else m.scrollTo(ga,ha,false,false,0,ia);};aa.prototype.scrub=function(ga){"use strict";if(this._scrubItem===ga)return;if(this.inform('scrub',ga)===false)return;var ha=aa.getTarget(ga);if(ha){this._scrubItem=ga;this._scrub&&this._scrub.stop();this._scrub=this.scrollTo(ha,750,function(){this._scrubItem=null;this._scrub=null;if(this.inform('afterscrub',ga)!==false)if(!this._scrollArea)this.select(ga);}.bind(this));}else this.select(ga);};aa.prototype.isScrubbing=function(){"use strict";return !!this._scrub;};aa.prototype.getSelected=function(){"use strict";return this._selected;};aa.prototype.getTargets=function(){"use strict";return this._targets;};aa.prototype.getScrollArea=function(){"use strict";return this._scrollArea;};aa.prototype.getScrollAreaJS=function(){"use strict";if(!this._scrollAreaJS&&this._scrollArea)this._scrollAreaJS=r.getInstance(this._scrollArea);return this._scrollAreaJS;};aa.prototype._handleClick=function(event){"use strict";var ga=q.byTag(event.getTarget(),'li');if(ga&&ba(ga)&&ca(ga)){this.scrub(ga);return false;}};aa.prototype._isScrubbingTo=function(ga){"use strict";return this._scrubItem&&this._scrubItem===ga;};aa.prototype._setSelected=function(ga,ha){"use strict";j.conditionClass(ga,"_5a",ha);};aa.prototype._moveFocus=function(event){"use strict";if(event.getModifiers().any)return;var ga=n.getKeyCode(event);if(ga===p.UP||ga===p.DOWN){var ha=k.scry(this._root,'a').filter(function(ka){return ka.offsetHeight||ka.offsetWidth;}),ia=ha.indexOf(this._tabbableElement);if(ia!=-1){var ja=ha[ia+(ga===p.UP?-1:1)];if(ja){ja.tabindex=0;o.set(ja);this._tabbableElement.tabindex=-1;this._tabbableElement=ja;event.prevent();}}}};aa.getLink=function(ga){"use strict";return ga.childNodes[0];};aa.getRollup=function(ga){"use strict";return ga.childNodes[1];};aa.getTarget=function(ga){"use strict";return v(ga.getAttribute('data-target'));};function ba(ga){return j.hasClass(ga,"_ga");}function ca(ga){return aa.getLink(ga).getAttribute('rel')==='scrubber';}function da(ga){return q.byClass(ga.parentNode,"_ga");}function ea(ga){var ha=[];while(ga){ha.unshift(ga);ga=da(ga);}return ha;}function fa(ga){var ha=aa.getRollup(ga);if(ha)if(ga=l.scry(ha,"li._ga")[0])return fa(ga);return ga;}e.exports=aa;});
__d("ScrubberResizeRollups",["Scrubber","Style"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this.$ScrubberResizeRollups0=j;}i.prototype.enable=function(){"use strict";this.$ScrubberResizeRollups1=this.$ScrubberResizeRollups0.subscribe(['roll','unroll'],function(j,k){return this.$ScrubberResizeRollups2(k,j==='unroll');}.bind(this));};i.prototype.disable=function(){"use strict";this.$ScrubberResizeRollups1.unsubscribe();this.$ScrubberResizeRollups1=null;};i.prototype.$ScrubberResizeRollups2=function(j,k){"use strict";var l=g.getRollup(j);if(l)if(k){this.$ScrubberResizeRollups3&&clearTimeout(this.$ScrubberResizeRollups3);this.$ScrubberResizeRollups3=setTimeout(function(){h.set(l,'height',l.scrollHeight+'px');},750);}else h.set(l,'height','0');};e.exports=i;});
__d("DevsiteReferenceTable",["CSS","cx","DOMQuery","Event","Parent"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m){"use strict";j.listen(m,'click',function(event){var n=k.byTag(event.getTarget(),'tr');if(!g.hasClass(n,"_5m27"))return;this.$DevsiteReferenceTable0(m,n,m.rows);}.bind(this));}l.prototype.$DevsiteReferenceTable0=function(m,n,o){"use strict";var p=this.$DevsiteReferenceTable1(n),q=g.hasClass(n,'open'),r=[].indexOf.call(o,n)+1;for(var s=r;s<o.length;s++){var t=o[s],u=this.$DevsiteReferenceTable1(t);if(!this.$DevsiteReferenceTable2(p,u))break;if(q){g.hide(t);}else if(this.$DevsiteReferenceTable3(p,u)){g.show(t);}else if(g.hasClass(this.$DevsiteReferenceTable4(m,u),'open'))g.show(t);}g.toggleClass(n,'open');};l.prototype.$DevsiteReferenceTable1=function(m){"use strict";return (/row_((\d+-?)+)/).exec(m.className)[1];};l.prototype.$DevsiteReferenceTable4=function(m,n){"use strict";var o=n.split('-');o.pop();return i.find(m,'tr.row_'+o.join('-'));};l.prototype.$DevsiteReferenceTable2=function(m,n){"use strict";return n.substring(0,m.length+1)===m+'-';};l.prototype.$DevsiteReferenceTable3=function(m,n){"use strict";var o=n.substr(m.length+1);return o.indexOf('-')<0;};e.exports=l;});
__d("PluginConfigurator",["CSS","DOM","Event","SelectorDeprecated","URI","$","arrayContains","copyProperties","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=[];function q(){}n(q.prototype,{init:function(r,s){this.config=r;this.config.code_button=s;for(var t in this.config.params)this.config.params[t].value=this.config.params[t]['default'];var u=l(this.config.form_id),v=h.scry(u,'input[type="text"]'),w=h.scry(u,'input[type="checkbox"]'),x=v.concat(w,h.scry(u,'textarea'));for(var y in this.config.params){var z=0;if(this.config.params[y].type=='question'){var aa='param_'+y+'_link',ba=y+'_link',ca=o(aa);this.config.params[ba]={};this.config.params[ba].lastShownPollItem=1;this.config.params[ba].questionName=y;for(var da=0,ea=x.length;da<ea;da++)if(x[da].name==y+"poll"+z){z++;this.config.params[x[da].name]={};this.config.params[x[da].name].pollName=y;this.config.params[x[da].name].type='poll';this.config.params[x[da].name].value=this.config.params[y]['default'];}this.config.params[y].questionsCount=z-1;i.listen(ca,'click',this.handleAddLinkClick.bind(this));}}for(var da=0,ea=x.length;da<ea;da++){this.updateFormElement(x[da]);i.listen(x[da],'change',this.handleChange.bind(this));}for(da=0;da<p.length;da++){var fa=p[da];this.updateFormElement(fa);fa.subscribe('change',function(ga,event){this.updateFormElement(ga);if(this.getName(ga)!='pageselector')this.renderExample();}.bind(this,fa));}this.renderExample();},renderExample:function(){var r='',s={},t=false,u=[],v;for(var w in this.config.params){var x=this.config.params[w],y=x.value,z=x['default'],aa=x.example,ba=x.always_set,ca=x.type;if(y===undefined&&aa!==undefined)y=aa;if(x.xfbml_name)w=x.xfbml_name;if(ca=='question')v=w;if(ca=='poll')u.push(y);if(w=='colorscheme'&&y=='dark')t=true;if(y!==undefined&&y!==''&&y!==null&&ca!='question'&&ca!='poll'&&(ba!=null||y!=z||y==aa)){w='data-'+w.replace(/_/g,'-');s[w]=y;}}if(u.length!==0)s[v]=JSON.stringify(u);r=h.create('div');for(var da in s)if(s.hasOwnProperty(da))r.setAttribute(da,s[da]);r.className=this.config.xfbml.replace(':','-');if(!this.config.example_id)return;var ea=l(this.config.example_id),fa=["fb:activity","fb:comments","fb:facepile","fb:follow","fb:like","fb:like-box","fb:recommendations"];if(m(fa,this.config.xfbml))g.conditionClass(r,'dark_background',t);h.setContent(ea,r);a.FB.XFBML.parse(ea);},handleAddLinkClick:function(event){var r=event.getTarget(),s=this.getName(r)||this.getName(r.parentNode),t=this.config.params[s].lastShownPollItem,u=this.config.params[s].questionName;t++;var v=o('param_'+u+t);if(v!=null){v.type="text";this.config.params[s].lastShownPollItem=t;var w=o('param_'+u+(t+1));if(w==null){r.parentNode.style.visibility='hidden';r.style.visibility='hidden';}}},handleChange:function(event){var r=event.getTarget();this.updateFormElement(r);this.renderExample();},getName:function(r){return r.name||r.getName()||r.getAttribute('data-name');},updateFormElement:function(r){var s=this.getName(r),t=this.config.params[s];if(s!==null&&t){if(t.type=='bool'){t.value=r.checked?'true':'false';}else if(t.type=='enum'){t.value=r.getValue();}else if(t.type=='pageselector'){var u=j.getValue(r);if(!!r.getAttribute('data-multiple')){u=u.filter(function(y){return y.length>0;});u=u.join(',');}t.value=u;}else if(r.value!=r.placeholder)t.value=r.value;var v=t.value;if(t.type=='poll'){v=this.handlePollValueChange(s);s=t.pollName;}var w={};w[s]=v;var x=k(this.config.code_button.href);x.addQueryData(w);this.config.code_button.href=x.toString();}},handlePollValueChange:function(r){var s=this.config.params[r],t=s.pollName,u=[];for(var v=0;v<this.config.params[t].questionsCount;v++){var w=this.config.params[t+'poll'+v].value;if(w!=='')u.push(w);}return JSON.stringify(u);}});q.initSelect=function(r,s){var t=h.scry(r,'button');t.forEach(function(u){i.listen(u,'click',function(event){t.forEach(function(v){g.removeClass(v,'uiPillButtonSelected');});g.addClass(u,'uiPillButtonSelected');s.show(u.id.replace('button','snip'));});});};q.initAppChooser=function(r,s){r.subscribe('change',function(t){var u=r.getValue(),v=s[u];if(v){l('sandbox_warning_link').href='https://developers.facebook.com/apps/'+u+'/summary/';g.show(l('sandbox_warning'));}else g.hide(l('sandbox_warning'));['snip-html5','snip-xfbml','snip-iframe','snip-url'].forEach(function(w){var x=h.scry(l(w),'textarea');if(x.length>0)h.setContent(x[0],h.getText(x[0]).replace(/appId=\d+/,'appId='+u));var y=h.scry(l(w),'.uiSelector');if(y.length>0)j.setSelected(y[0],u);});});};q.registerSelector=function(r){p.push(r);};e.exports=q;});
__d("legacy:devsite-plugin-config",["PluginConfigurator"],function(a,b,c,d){a.PluginConfigurator=b('PluginConfigurator');},3);
__d("ScrubberUpdateOnScroll",["DOM","DOMDimensions","Event","SubscriptionsHandler","Vector","ViewportBounds","getElementPosition","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p){"use strict";this._scrubber=p;this._scrollArea=this._scrubber.getScrollArea();this._listeners=new j();}o.prototype.enable=function(){"use strict";if(this._scrollArea){var p=g.find(this._scrollArea,'.uiScrollableAreaWrap');this._listeners.addSubscriptions(i.listen(p,'scroll',n(this._handleScroll,10,this)));}else this._listeners.addSubscriptions(i.listen(window,'scroll',n(this._handleScroll,10,this)),i.listen(window,'resize',n(this._handleResize,10,this)));this._updateThreshold();};o.prototype.disable=function(){"use strict";this._listeners.release();};o.prototype._handleScroll=function(event){"use strict";var p=this._scrubber.getTargets();if(!p.length)return;var q=p[0];for(var r=0;r<p.length;r++){var s=m(p[r].node).y,t=p[r].node.offsetHeight;if(t+s<=this._getTop())continue;q=p[r];if(t<this._threshold||t+s>this._threshold)break;}this._scrubber.select(q.item);};o.prototype._getTop=function(){"use strict";if(this._scrollArea)return m(this._scrollArea).y;return l.getTop();};o.prototype._handleResize=function(){"use strict";this._updateThreshold();};o.prototype._updateThreshold=function(){"use strict";if(this._scrollArea){var p=this._scrubber.getScrollAreaJS();this._threshold=p?p.getScrollHeight()/5:k.getElementDimensions(this._scrollArea).y/5;}else this._threshold=h.getViewportDimensions().height/5;};e.exports=o;});